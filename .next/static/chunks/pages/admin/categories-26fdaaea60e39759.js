(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{7393:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/categories",function(){return a(370)}])},7886:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},5444:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},7969:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]])},5197:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3696:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},1880:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},3416:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},8453:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5809:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},1565:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5451:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},4088:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},2770:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(1462).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},3270:function(e,t,a){"use strict";a.r(t),a.d(t,{AdminLayout:function(){return w}});var r=a(5893),s=a(7294),n=a(1664),i=a.n(n),o=a(1163),l=a(3460),d=a(5444),c=a(4088),h=a(1880),u=a(2770),g=a(7969),m=a(7886),x=a(1565),y=a(8154),p=a(760),f=a(3696),b=a(5781);let j="horizon_admin_token",w=e=>{let{children:t}=e,[a,n]=(0,s.useState)(!1),[w,v]=(0,s.useState)(""),[N,k]=(0,s.useState)(""),[Z,M]=(0,s.useState)(!1),S=(0,o.useRouter)(),{settings:C}=(0,b.T)();if((0,s.useEffect)(()=>{localStorage.getItem(j)&&n(!0)},[]),(0,s.useEffect)(()=>{M(!1)},[S.pathname]),!a)return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,r.jsxs)("div",{className:"w-full max-w-md p-8 bg-white rounded-xl shadow-lg border border-gray-100",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-indigo-100 text-indigo-600 mb-4",children:(0,r.jsx)(l.Z,{className:"w-8 h-8"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Admin Access"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Secure Dashboard Login"})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"admin123"===w?(localStorage.setItem(j,"valid"),n(!0),k("")):k('Invalid password. Try "admin123"')},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,r.jsx)("input",{type:"password",value:w,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter admin password"})]}),N&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:N}),(0,r.jsx)("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-indigo-700 transition-colors shadow-md hover:shadow-lg",children:"Login to Console"})]})]})});let E=[{href:"/admin",label:"Dashboard",icon:d.Z},{href:"/admin/analytics",label:"Analytics",icon:c.Z},{href:"/admin/products",label:"Products & Stock",icon:h.Z},{href:"/admin/import",label:"Bulk Import",icon:u.Z},{href:"/admin/categories",label:"Categories",icon:g.Z},{href:"/admin/banner",label:"Banner",icon:m.Z},{href:"/admin/settings/general",label:"General Settings",icon:x.Z},{href:"/admin/settings/stock",label:"Stock Status",icon:x.Z}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"lg:hidden sticky top-16 z-40 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"font-semibold text-gray-900",children:"Admin Console"}),(0,r.jsx)("button",{onClick:()=>M(!Z),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Toggle menu",children:Z?(0,r.jsx)(y.Z,{className:"w-6 h-6"}):(0,r.jsx)(p.Z,{className:"w-6 h-6"})})]}),Z&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>M(!1)}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,r.jsx)("aside",{className:"\n            fixed lg:static inset-y-0 left-0 z-50\n            lg:col-span-3 xl:col-span-2\n            transform transition-transform duration-300 ease-in-out\n            ".concat(Z?"translate-x-0":"-translate-x-full lg:translate-x-0","\n            w-64 lg:w-auto\n          "),children:(0,r.jsxs)("div",{className:"bg-white rounded-none lg:rounded-xl shadow-lg lg:shadow-sm border-r lg:border border-gray-100 overflow-hidden sticky top-16 lg:top-24 h-[calc(100vh-4rem)] lg:h-auto",children:[(0,r.jsxs)("div",{className:"p-4 border-b bg-gradient-to-r from-indigo-50 to-purple-50",children:[(0,r.jsx)("h3",{className:"font-bold text-gray-900 text-lg",children:"Admin Console"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:(null==C?void 0:C.storeName)||"Manage your store"})]}),(0,r.jsx)("nav",{className:"p-2 space-y-1 overflow-y-auto max-h-[calc(100vh-12rem)]",children:E.map(e=>{let t=S.pathname===e.href||"/admin"!==e.href&&S.pathname.startsWith(e.href),a=e.icon;return(0,r.jsxs)(i(),{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ".concat(t?"bg-indigo-50 text-indigo-700 shadow-sm":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,r.jsx)(a,{className:"w-5 h-5"}),e.label]},e.href)})}),(0,r.jsx)("div",{className:"p-4 border-t mt-auto bg-gray-50",children:(0,r.jsxs)("button",{onClick:()=>{localStorage.removeItem(j),n(!1),S.push("/")},className:"flex items-center gap-3 w-full px-4 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5"}),"Logout"]})})]})}),(0,r.jsx)("main",{className:"lg:col-span-9 xl:col-span-10",children:t})]})]})}},370:function(e,t,a){"use strict";a.r(t);var r=a(5893),s=a(7294),n=a(3270),i=a(7969),o=a(5197),l=a(8453),d=a(5809),c=a(8154),h=a(3416),u=a(5451);let g=()=>{let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)([]),[g,m]=(0,s.useState)(!0),[x,y]=(0,s.useState)(""),[p,f]=(0,s.useState)(0),[b,j]=(0,s.useState)(!1),[w,v]=(0,s.useState)(null),[N,k]=(0,s.useState)(""),[Z,M]=(0,s.useState)(0),S=async()=>{m(!0);try{let[e,a]=await Promise.all([fetch("/api/categories"),fetch("/api/products")]);if(!e.ok||!a.ok)throw Error("Failed to fetch data");let r=await e.json(),s=await a.json();t(r.sort((e,t)=>e.displayOrder-t.displayOrder)),n(s)}catch(e){console.error("Failed to fetch data:",e),alert("Error loading categories. Please refresh the page.")}finally{m(!1)}};(0,s.useEffect)(()=>{S()},[]);let C=async a=>{if(a.preventDefault(),x.trim()){j(!0);try{let a=await fetch("/api/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:x.trim(),displayOrder:p})});if(!a.ok)throw Error("Failed to add category");let r=await a.json();t([...e,r].sort((e,t)=>e.displayOrder-t.displayOrder)),y(""),f(0)}catch(e){console.error("Failed to add category:",e),alert("Error adding category.")}finally{j(!1)}}},E=e=>{v(e.id),k(e.name),M(e.displayOrder)},O=()=>{v(null),k(""),M(0)},_=async a=>{if(N.trim())try{let r=await fetch("/api/categories",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a,name:N.trim(),displayOrder:Z})});if(!r.ok)throw Error("Failed to update category");let s=await r.json();t(e.map(e=>e.id===a?s:e).sort((e,t)=>e.displayOrder-t.displayOrder)),O()}catch(e){console.error("Failed to update category:",e),alert("Error updating category.")}},z=async r=>{let s=a.filter(e=>e.categoryId===r).length;if(window.confirm(s>0?"Warning: ".concat(s," product(s) are in this category. Deleting the category will NOT delete the products, but they will become uncategorized. Continue?"):"Are you sure you want to delete this category?"))try{if(!(await fetch("/api/categories?id=".concat(r),{method:"DELETE"})).ok)throw Error("Failed to delete category");t(e.filter(e=>e.id!==r))}catch(e){console.error("Failed to delete category:",e),alert("Error deleting category. Make sure no products are assigned to it.")}};return(0,r.jsxs)("div",{className:"space-y-6 max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"bg-indigo-100 p-2 rounded-lg",children:(0,r.jsx)(i.Z,{className:"w-6 h-6 text-indigo-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Category Management"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Manage product categories and their display order."})]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Category"}),(0,r.jsxs)("form",{onSubmit:C,className:"flex flex-col sm:flex-row gap-3",children:[(0,r.jsx)("input",{type:"text",placeholder:"Category Name",className:"flex-grow px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",value:x,onChange:e=>y(e.target.value)}),(0,r.jsx)("input",{type:"number",placeholder:"Order",className:"w-24 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",value:p,onChange:e=>f(parseInt(e.target.value,10)||0)}),(0,r.jsxs)("button",{type:"submit",disabled:b||!x.trim(),className:"px-6 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 flex items-center justify-center gap-2 transition-colors",children:[b?(0,r.jsx)(o.Z,{className:"w-4 h-4 animate-spin"}):(0,r.jsx)(l.Z,{className:"w-4 h-4"}),"Add"]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"p-4 bg-gray-50 border-b border-gray-100",children:(0,r.jsxs)("h3",{className:"font-semibold text-gray-700",children:["Existing Categories (",e.length,")"]})}),g?(0,r.jsx)("div",{className:"p-8 flex justify-center",children:(0,r.jsx)(o.Z,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):0===e.length?(0,r.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No categories found."}):(0,r.jsx)("ul",{className:"divide-y divide-gray-100",children:e.map(e=>{let t=a.filter(t=>t.categoryId===e.id).length,s=w===e.id;return(0,r.jsx)("li",{className:"p-4 hover:bg-gray-50 transition-colors",children:(0,r.jsx)("div",{className:"flex items-center justify-between gap-4",children:s?(0,r.jsxs)("div",{className:"flex-grow flex items-center gap-3",children:[(0,r.jsx)("input",{type:"text",value:N,onChange:e=>k(e.target.value),className:"flex-grow px-3 py-1.5 border border-indigo-300 rounded-md focus:ring-2 focus:ring-indigo-500",autoFocus:!0}),(0,r.jsx)("input",{type:"number",value:Z,onChange:e=>M(parseInt(e.target.value,10)||0),className:"w-24 px-3 py-1.5 border border-indigo-300 rounded-md focus:ring-2 focus:ring-indigo-500"}),(0,r.jsx)("button",{onClick:()=>_(e.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:(0,r.jsx)(d.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:O,className:"p-2 text-gray-400 hover:bg-gray-100 rounded-md",title:"Cancel",children:(0,r.jsx)(c.Z,{className:"w-4 h-4"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-xs font-mono bg-gray-100 text-gray-500 rounded-full w-8 h-8 flex items-center justify-center",children:e.displayOrder}),(0,r.jsx)("span",{className:"font-medium text-gray-800",children:e.name}),(0,r.jsxs)("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-500 rounded-full",children:[t," products"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>E(e),className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",title:"Edit",children:(0,r.jsx)(h.Z,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>z(e.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete",children:(0,r.jsx)(u.Z,{className:"w-4 h-4"})})]})]})})},e.id)})})]})]})};g.getLayout=function(e){return(0,r.jsx)(n.AdminLayout,{children:e})},t.default=g}},function(e){e.O(0,[888,774,179],function(){return e(e.s=7393)}),_N_E=e.O()}]);