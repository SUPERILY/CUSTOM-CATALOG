(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{5853:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/import",function(){return t(9182)}])},3270:function(e,s,t){"use strict";t.r(s),t.d(s,{AdminLayout:function(){return N}});var a=t(5893),r=t(7294),l=t(1664),d=t.n(l),i=t(1163),n=t(3460),o=t(5444),c=t(4088),x=t(1880),m=t(2770),h=t(7969),g=t(7886),p=t(1565),u=t(8154),b=t(760),j=t(3696),f=t(5781);let y="horizon_admin_token",N=e=>{let{children:s}=e,[t,l]=(0,r.useState)(!1),[N,v]=(0,r.useState)(""),[w,S]=(0,r.useState)(""),[k,C]=(0,r.useState)(!1),Z=(0,i.useRouter)(),{settings:I}=(0,f.T)();if((0,r.useEffect)(()=>{localStorage.getItem(y)&&l(!0)},[]),(0,r.useEffect)(()=>{C(!1)},[Z.pathname]),!t)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsxs)("div",{className:"w-full max-w-md p-8 bg-white rounded-xl shadow-lg border border-gray-100",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-indigo-100 text-indigo-600 mb-4",children:(0,a.jsx)(n.Z,{className:"w-8 h-8"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Admin Access"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Secure Dashboard Login"})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"admin123"===N?(localStorage.setItem(y,"valid"),l(!0),S("")):S('Invalid password. Try "admin123"')},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)("input",{type:"password",value:N,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter admin password"})]}),w&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:w}),(0,a.jsx)("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-indigo-700 transition-colors shadow-md hover:shadow-lg",children:"Login to Console"})]})]})});let _=[{href:"/admin",label:"Dashboard",icon:o.Z},{href:"/admin/analytics",label:"Analytics",icon:c.Z},{href:"/admin/products",label:"Products & Stock",icon:x.Z},{href:"/admin/import",label:"Bulk Import",icon:m.Z},{href:"/admin/categories",label:"Categories",icon:h.Z},{href:"/admin/banner",label:"Banner",icon:g.Z},{href:"/admin/settings/general",label:"General Settings",icon:p.Z},{href:"/admin/settings/stock",label:"Stock Status",icon:p.Z}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"lg:hidden sticky top-16 z-40 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"font-semibold text-gray-900",children:"Admin Console"}),(0,a.jsx)("button",{onClick:()=>C(!k),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Toggle menu",children:k?(0,a.jsx)(u.Z,{className:"w-6 h-6"}):(0,a.jsx)(b.Z,{className:"w-6 h-6"})})]}),k&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>C(!1)}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,a.jsx)("aside",{className:"\n            fixed lg:static inset-y-0 left-0 z-50\n            lg:col-span-3 xl:col-span-2\n            transform transition-transform duration-300 ease-in-out\n            ".concat(k?"translate-x-0":"-translate-x-full lg:translate-x-0","\n            w-64 lg:w-auto\n          "),children:(0,a.jsxs)("div",{className:"bg-white rounded-none lg:rounded-xl shadow-lg lg:shadow-sm border-r lg:border border-gray-100 overflow-hidden sticky top-16 lg:top-24 h-[calc(100vh-4rem)] lg:h-auto",children:[(0,a.jsxs)("div",{className:"p-4 border-b bg-gradient-to-r from-indigo-50 to-purple-50",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 text-lg",children:"Admin Console"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:(null==I?void 0:I.storeName)||"Manage your store"})]}),(0,a.jsx)("nav",{className:"p-2 space-y-1 overflow-y-auto max-h-[calc(100vh-12rem)]",children:_.map(e=>{let s=Z.pathname===e.href||"/admin"!==e.href&&Z.pathname.startsWith(e.href),t=e.icon;return(0,a.jsxs)(d(),{href:e.href,className:"flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200 ".concat(s?"bg-indigo-50 text-indigo-700 shadow-sm":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,a.jsx)(t,{className:"w-5 h-5"}),e.label]},e.href)})}),(0,a.jsx)("div",{className:"p-4 border-t mt-auto bg-gray-50",children:(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem(y),l(!1),Z.push("/")},className:"flex items-center gap-3 w-full px-4 py-2.5 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5"}),"Logout"]})})]})}),(0,a.jsx)("main",{className:"lg:col-span-9 xl:col-span-10",children:s})]})]})}},9182:function(e,s,t){"use strict";t.r(s);var a=t(5893),r=t(7294),l=t(3270),d=t(7460),i=t.n(d),n=t(3552),o=t(9967),c=t(2770),x=t(1952),m=t(7372),h=t(5875),g=t(1593),p=t(5197),u=t(1664),b=t.n(u);let j=()=>{let[e,s]=(0,r.useState)("upload"),[t,l]=(0,r.useState)(null),[d,u]=(0,r.useState)([]),[j,f]=(0,r.useState)([]),[y,N]=(0,r.useState)([]),[v,w]=(0,r.useState)(!1),[S,k]=(0,r.useState)(null),[C,Z]=(0,r.useState)(!0),I=e=>{i().parse(e,{header:!0,skipEmptyLines:!0,complete:e=>{let t=e.data.filter(e=>e.name&&!e.name.startsWith("#"));u(t),s("validate"),_(t)},error:e=>{alert("Error parsing CSV: ".concat(e.message))}})},_=async e=>{try{let t=await fetch("/api/products/bulk-import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rows:e,updateExisting:!1,validateOnly:!0})}),a=await t.json();a.errors&&f(a.errors),a.warnings&&N(a.warnings),a.errors&&a.errors.length>0?s("validate"):s("preview")}catch(e){console.error("Validation error:",e),alert("Failed to validate import data")}},P=async()=>{w(!0);try{let e=await fetch("/api/products/bulk-import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rows:d,updateExisting:C})}),t=await e.json();t.success?(k(t.results),s("complete")):(f(t.errors||[]),s("validate"))}catch(e){console.error("Import error:",e),alert("Failed to import products")}finally{w(!1)}},E=()=>{s("upload"),l(null),u([]),f([]),N([]),k(null)};return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Bulk Product Import"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Import multiple products from CSV file"})]}),(0,a.jsxs)("a",{href:"/api/products/template",download:!0,className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 text-sm font-medium",children:[(0,a.jsx)(n.Z,{className:"w-4 h-4"}),"Download Template"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:["Upload","Validate","Preview","Import","Complete"].map((s,t)=>{let l=["upload","validate","preview","import","complete"].indexOf(e),d=t===l,i=t<l;return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-semibold ".concat(i?"bg-green-500 text-white":d?"bg-indigo-600 text-white":"bg-gray-200 text-gray-500"),children:i?(0,a.jsx)(o.Z,{className:"w-5 h-5"}):t+1}),(0,a.jsx)("span",{className:"text-xs mt-2 ".concat(d?"text-indigo-600 font-medium":"text-gray-500"),children:s})]}),t<4&&(0,a.jsx)("div",{className:"flex-1 h-1 mx-2 ".concat(i?"bg-green-500":"bg-gray-200")})]},s)})})}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:["upload"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Upload CSV File"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Select a CSV file containing your product data"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center hover:border-indigo-500 transition-colors",children:[(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];t&&(l(t),I(t))},className:"hidden",id:"csv-upload"}),(0,a.jsxs)("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[(0,a.jsx)(x.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Click to select CSV file or drag and drop"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"CSV files only"})]})]}),t&&(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-indigo-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:t.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(t.size/1024).toFixed(2)," KB"]})]})]})})]}),"validate"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Validation Results"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Found ",d.length," products in CSV file"]})]}),j.length>0&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h3",{className:"font-semibold text-red-900 mb-2",children:[j.length," Errors Found"]}),(0,a.jsxs)("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:[j.slice(0,20).map((e,s)=>(0,a.jsxs)("p",{className:"text-sm text-red-800",children:["Row ",e.row,", ",e.field,": ",e.message]},s)),j.length>20&&(0,a.jsxs)("p",{className:"text-sm text-red-700 font-medium",children:["... and ",j.length-20," more errors"]})]})]})]})}),y.length>0&&(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h3",{className:"font-semibold text-yellow-900 mb-2",children:[y.length," Warnings"]}),(0,a.jsx)("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:y.map((e,s)=>(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:["Row ",e.row,": ",e.message]},s))})]})]})}),0===j.length&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsx)("p",{className:"text-green-900 font-medium",children:"All rows validated successfully!"})]})}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[(0,a.jsxs)("button",{onClick:E,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 inline mr-2"}),"Start Over"]}),0===j.length&&(0,a.jsxs)("button",{onClick:()=>s("preview"),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:["Continue to Preview",(0,a.jsx)(g.Z,{className:"w-4 h-4 inline ml-2"})]})]})]}),"preview"===e&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Preview Import"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Review products before importing"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("input",{type:"checkbox",id:"update-existing",checked:C,onChange:e=>Z(e.target.checked),className:"h-4 w-4 rounded text-indigo-600 focus:ring-indigo-500"}),(0,a.jsx)("label",{htmlFor:"update-existing",className:"text-sm font-medium text-gray-700",children:"Update existing products (match by SKU)"})]}),(0,a.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto max-h-96",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Price"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Stock"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.slice(0,50).map((e,s)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.sku}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-900",children:["$",e.price]}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.category}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100",children:e.stockStatus||"IN_STOCK"})})]},s))})]})}),d.length>50&&(0,a.jsxs)("div",{className:"bg-gray-50 px-4 py-3 text-sm text-gray-600 border-t",children:["Showing first 50 of ",d.length," products"]})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[(0,a.jsxs)("button",{onClick:()=>s("validate"),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 inline mr-2"}),"Back"]}),(0,a.jsx)("button",{onClick:P,disabled:v,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium disabled:opacity-50 flex items-center gap-2",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 animate-spin"}),"Importing..."]}):(0,a.jsxs)(a.Fragment,{children:["Import ",d.length," Products",(0,a.jsx)(g.Z,{className:"w-4 h-4"})]})})]})]}),"complete"===e&&S&&(0,a.jsxs)("div",{className:"space-y-6 text-center",children:[(0,a.jsx)(o.Z,{className:"w-16 h-16 text-green-500 mx-auto"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Import Complete!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Your products have been imported successfully"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:S.created}),(0,a.jsx)("div",{className:"text-sm text-green-800",children:"Created"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:S.updated}),(0,a.jsx)("div",{className:"text-sm text-blue-800",children:"Updated"})]}),(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-red-600",children:S.failed}),(0,a.jsx)("div",{className:"text-sm text-red-800",children:"Failed"})]})]}),S.errors.length>0&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-left max-w-2xl mx-auto",children:[(0,a.jsx)("h3",{className:"font-semibold text-red-900 mb-2",children:"Errors:"}),(0,a.jsx)("div",{className:"space-y-1 max-h-48 overflow-y-auto",children:S.errors.map((e,s)=>(0,a.jsxs)("p",{className:"text-sm text-red-800",children:["Row ",e.row,": ",e.message]},s))})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center pt-4",children:[(0,a.jsx)("button",{onClick:E,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-medium",children:"Import More Products"}),(0,a.jsx)(b(),{href:"/admin/products",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium",children:"View Products"})]})]})]})]})};j.getLayout=function(e){return(0,a.jsx)(l.AdminLayout,{children:e})},s.default=j}},function(e){e.O(0,[67,888,774,179],function(){return e(e.s=5853)}),_N_E=e.O()}]);