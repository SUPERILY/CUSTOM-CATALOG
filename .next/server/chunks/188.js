exports.id=188,exports.ids=[188],exports.modules={862:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var r=a(997),s=a(6689),l=a.n(s),i=a(1664),c=a.n(i),o=a(1163),n=a(5261),d=a(3460),u=a(8154),y=a(760),m=a(5781);let h=({children:e})=>{let t=(0,o.useRouter)(),[a,s]=l().useState(!1),{settings:i}=(0,m.T)();return t.pathname.startsWith("/admin"),(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,r.jsxs)("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[r.jsx("div",{className:"flex items-center",children:(0,r.jsxs)(c(),{href:"/",className:"flex-shrink-0 flex items-center gap-3 group",children:[i?.logoUrl?r.jsx("img",{src:i.logoUrl,alt:i.storeName,className:"h-10 w-auto object-contain"}):r.jsx("div",{className:"bg-gradient-to-br from-yellow-600 to-yellow-800 text-white p-1.5 rounded-lg shadow-sm",children:r.jsx(n.Z,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-display font-bold text-xl tracking-wide text-transparent bg-clip-text bg-gradient-to-r from-yellow-700 via-yellow-600 to-yellow-800 uppercase leading-none",children:i?.storeName||"Eljarjini"}),!i?.logoUrl&&r.jsx("span",{className:"font-display italic text-sm text-yellow-600 leading-none self-end -mt-1",children:"Complexe"})]})]})}),(0,r.jsxs)("div",{className:"hidden sm:flex sm:items-center sm:gap-6",children:[r.jsx(c(),{href:"/",className:"text-gray-600 hover:text-yellow-700 font-medium transition-colors",children:"Catalog"}),(0,r.jsxs)(c(),{href:"/admin",className:"flex items-center gap-1 text-gray-500 hover:text-gray-900 font-medium transition-colors",children:[r.jsx(d.Z,{className:"h-4 w-4"}),"Admin"]})]}),r.jsx("div",{className:"flex items-center sm:hidden",children:r.jsx("button",{onClick:()=>s(!a),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none",children:a?r.jsx(u.Z,{className:"h-6 w-6"}):r.jsx(y.Z,{className:"h-6 w-6"})})})]})}),a&&r.jsx("div",{className:"sm:hidden bg-white border-t",children:(0,r.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[r.jsx(c(),{href:"/",onClick:()=>s(!1),className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-yellow-500 hover:text-yellow-700",children:"Catalog"}),r.jsx(c(),{href:"/admin",onClick:()=>s(!1),className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-gray-500 hover:text-gray-700",children:"Admin Console"})]})})]}),r.jsx("main",{className:"flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e}),r.jsx("footer",{className:"bg-white border-t mt-auto",children:r.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("p",{className:"text-center text-gray-400 text-sm",children:["\xa9 ",new Date().getFullYear()," Eljarjini Complexe. All rights reserved."]})})})]})}},4009:(e,t,a)=>{"use strict";a.d(t,{k:()=>u});var r=a(997);a(6689);var s=a(9967),l=a(1462);let i=(0,l.Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),c=(0,l.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var o=a(7218);let n=(0,l.Z)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var d=a(4566);let u=({status:e,size:t="md"})=>{let{statuses:a}=(0,d.s)(),l=a.find(t=>t.value===e),u="IN_STOCK"===e?s.Z:"LOW_STOCK"===e?i:"OUT_OF_STOCK"===e?c:"BACKORDER"===e?o.Z:n,y=l?l.color:"gray",m=l?l.label:e.replace(/_/g," "),h=y.startsWith("#"),p=h?{backgroundColor:`${y}20`,color:y,borderColor:`${y}40`}:void 0,x=`inline-flex items-center gap-1.5 rounded-full border font-medium ${{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-0.5 text-sm",lg:"px-3 py-1 text-base"}[t]} ${h?"":`bg-${y}-100 text-${y}-800 border-${y}-200`}`;return(0,r.jsxs)("span",{className:x,style:p,children:[r.jsx(u,{className:"sm"===t?"w-3 h-3":"w-4 h-4"}),m]})}},332:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{C:()=>o,V:()=>c});var s=a(997);a(6689);var l=a(6201),i=e([l]);l=(i.then?(await i)():i)[0];let c=({children:e})=>(0,s.jsxs)(s.Fragment,{children:[e,s.jsx(l.Toaster,{position:"top-right",reverseOrder:!1,gutter:8,toastOptions:{duration:4e3,style:{background:"#fff",color:"#363636",padding:"16px",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]}),o={success:e=>l.toast.success(e),error:e=>l.toast.error(e),loading:e=>l.toast.loading(e),promise:(e,t)=>l.toast.promise(e,t)};r()}catch(e){r(e)}})},4566:(e,t,a)=>{"use strict";a.d(t,{U:()=>i,s:()=>c});var r=a(997),s=a(6689);let l=(0,s.createContext)(void 0),i=({children:e})=>{let[t,a]=(0,s.useState)([]),[i,c]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/stock-status");if(e.ok){let t=await e.json();a(t)}}catch(e){console.error("Failed to fetch stock statuses:",e)}finally{c(!1)}})()},[]),r.jsx(l.Provider,{value:{statuses:t,getStatusColor:e=>{let a=t.find(t=>t.value===e);return a?a.color:"gray"},getStatusLabel:e=>{let a=t.find(t=>t.value===e);return a?a.label:e},loading:i},children:e})},c=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useStockStatus must be used within a StockStatusProvider");return e}},5781:(e,t,a)=>{"use strict";a.d(t,{T:()=>c,_:()=>i});var r=a(997),s=a(6689);let l=(0,s.createContext)(void 0),i=({children:e})=>{let[t,a]=(0,s.useState)(null),[i,c]=(0,s.useState)(!0),o=async()=>{try{let e=await fetch("/api/settings");if(e.ok){let t=await e.json();a(t)}}catch(e){console.error("Failed to fetch store settings:",e)}finally{c(!1)}};return(0,s.useEffect)(()=>{o()},[]),r.jsx(l.Provider,{value:{settings:t,loading:i,refreshSettings:o},children:e})},c=()=>{let e=(0,s.useContext)(l);if(void 0===e)throw Error("useStoreSettings must be used within a StoreSettingsProvider");return e}},3785:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9967:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7218:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},5656:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},6814:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>d});var s=a(997);a(2379);var l=a(862),i=a(332),c=a(4566),o=a(5781),n=e([i]);i=(n.then?(await n)():n)[0];let d=function({Component:e,pageProps:t}){let a=e.getLayout??(e=>s.jsx(l.A,{children:e}));return s.jsx(i.V,{children:s.jsx(c.U,{children:s.jsx(o._,{children:a(s.jsx(e,{...t}))})})})};r()}catch(e){r(e)}})},1227:(e,t,a)=>{"use strict";let r;a.d(t,{DB:()=>s}),r=new(a(3524)).PrismaClient;let s={getProducts:async()=>await r.product.findMany({orderBy:{name:"asc"},include:{images:!0,category:!0,features:!0}}),getProductById:async e=>await r.product.findUnique({where:{id:e},include:{images:!0,category:!0,features:!0}}),saveProduct:async e=>{let{id:t,categoryId:a,features:s,images:l,...i}=e,c=s.map(e=>({text:e})),o=l.map(e=>({url:e}));return t?await r.$transaction(async e=>(await e.feature.deleteMany({where:{productId:t}}),await e.image.deleteMany({where:{productId:t}}),e.product.update({where:{id:t},data:{...i,category:{connect:{id:a}},features:{create:c},images:{create:o}},include:{images:!0,category:!0,features:!0}}))):await r.product.create({data:{...i,category:{connect:{id:a}},features:{create:c},images:{create:o}},include:{images:!0,category:!0,features:!0}})},deleteProduct:async e=>{await r.product.delete({where:{id:e}})},duplicateProduct:async e=>{let t=await r.product.findUnique({where:{id:e},include:{images:!0,category:!0,features:!0}});if(!t)throw Error("Product not found");let a=`${t.sku}-COPY`,s=1;for(;await r.product.findFirst({where:{sku:a}});)a=`${t.sku}-COPY${s}`,s++;return await r.product.create({data:{name:`${t.name} (Copy)`,sku:a,description:t.description,price:t.price,hidePrice:t.hidePrice,stockStatus:t.stockStatus,category:{connect:{id:t.categoryId}},features:{create:t.features.map(e=>({text:e.text}))},images:{create:t.images.map(e=>({url:e.url}))}},include:{images:!0,category:!0,features:!0}})},getCategories:async()=>r.category.findMany({orderBy:{displayOrder:"asc"}}),saveCategory:async e=>e.id?r.category.update({where:{id:e.id},data:e}):r.category.create({data:e}),deleteCategory:async e=>{await r.category.delete({where:{id:e}})},getBanners:async()=>r.banner.findMany({orderBy:{displayOrder:"asc"}}),getBannerById:async e=>r.banner.findUnique({where:{id:e}}),createBanner:async e=>r.banner.create({data:e}),updateBanner:async(e,t)=>r.banner.update({where:{id:e},data:t}),deleteBanner:async e=>{await r.banner.delete({where:{id:e}})},getBanner:async()=>{let e=await r.banner.findMany({where:{isActive:!0},orderBy:{displayOrder:"asc"},take:1});return e.length>0?e[0]:r.banner.create({data:{title:"Welcome to the Catalog",subtitle:"Explore our products.",imageUrl:"https://picsum.photos/seed/banner/1200/400",linkText:"Explore",linkUrl:"#catalog",isActive:!0,displayOrder:0}})},saveBanner:async e=>{let t=await r.banner.findFirst({orderBy:{displayOrder:"asc"}});return t?r.banner.update({where:{id:t.id},data:e}):r.banner.create({data:{title:e.title||"",subtitle:e.subtitle||"",imageUrl:e.imageUrl||"",mobileImageUrl:e.mobileImageUrl||null,linkText:e.linkText||"",linkUrl:e.linkUrl||"",isActive:e.isActive??!0,displayOrder:e.displayOrder??0}})},async getStockStatuses(){return 0===await r.stockStatus.count()&&await this.seedStockStatuses(),r.stockStatus.findMany({orderBy:{label:"asc"}})},createStockStatus:async e=>r.stockStatus.create({data:{...e,isDefault:!1}}),updateStockStatus:async(e,t)=>r.stockStatus.update({where:{id:e},data:t}),deleteStockStatus:async e=>r.stockStatus.delete({where:{id:e}}),async seedStockStatuses(){for(let e of[{label:"In Stock",value:"IN_STOCK",color:"green"},{label:"Low Stock",value:"LOW_STOCK",color:"yellow"},{label:"Out of Stock",value:"OUT_OF_STOCK",color:"red"},{label:"Backorder",value:"BACKORDER",color:"orange"}])await r.stockStatus.upsert({where:{value:e.value},update:{},create:{label:e.label,value:e.value,color:e.color,isDefault:!0}})},async getStoreSettings(){let e=await r.storeSettings.findUnique({where:{id:"default"}});return e||(e=await r.storeSettings.create({data:{id:"default",storeName:"Eljarjini Complexe"}})),e},async updateStoreSettings(e){return await this.getStoreSettings(),r.storeSettings.update({where:{id:"default"},data:e})}}},2379:()=>{}};