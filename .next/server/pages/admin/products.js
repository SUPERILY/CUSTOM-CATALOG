"use strict";(()=>{var e={};e.id=209,e.ids=[209,660],e.modules={8336:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>p,getServerSideProps:()=>m,getStaticPaths:()=>x,getStaticProps:()=>h,reportWebVitals:()=>y,routeModule:()=>N,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>j,unstable_getStaticProps:()=>f});var r=s(7093),d=s(5244),o=s(1323),i=s(2899),l=s.n(i),c=s(6814),n=s(9351),u=e([c,n]);[c,n]=u.then?(await u)():u;let p=(0,o.l)(n,"default"),h=(0,o.l)(n,"getStaticProps"),x=(0,o.l)(n,"getStaticPaths"),m=(0,o.l)(n,"getServerSideProps"),g=(0,o.l)(n,"config"),y=(0,o.l)(n,"reportWebVitals"),f=(0,o.l)(n,"unstable_getStaticProps"),j=(0,o.l)(n,"unstable_getStaticPaths"),b=(0,o.l)(n,"unstable_getStaticParams"),w=(0,o.l)(n,"unstable_getServerProps"),S=(0,o.l)(n,"unstable_getServerSideProps"),N=new r.PagesRouteModule({definition:{kind:d.x.PAGES,page:"/admin/products",pathname:"/admin/products",bundlePath:"",filename:""},components:{App:c.default,Document:l()},userland:n});a()}catch(e){a(e)}})},9710:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},3552:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},7233:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},5197:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3416:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},8453:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4672:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},6170:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3225:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},5451:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(1462).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},9351:(e,t,s)=>{s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{default:()=>P});var r=s(997),d=s(6689),o=s(1664),i=s.n(o),l=s(5675),c=s.n(l),n=s(6619),u=s(3552),p=s(8453),h=s(4672),x=s(6170),m=s(3225),g=s(5197),y=s(7886),f=s(7233),j=s(9710),b=s(3416),w=s(5451),S=s(332),N=s(8122),v=e([S]);S=(v.then?(await v)():v)[0];let k=["IN_STOCK","LOW_STOCK","OUT_OF_STOCK","BACKORDER"],C=()=>{let[e,t]=(0,d.useState)([]),[s,a]=(0,d.useState)(!0),[o,l]=(0,d.useState)(""),[n,v]=(0,d.useState)(new Set),C=async()=>{a(!0);try{let e=await fetch("/api/products");if(!e.ok)throw Error("Failed to fetch products");let s=await e.json();t(s)}catch(e){console.error("Failed to fetch products:",e),S.C.error("Failed to load products")}finally{a(!1)}};(0,d.useEffect)(()=>{C()},[]);let P=async(s,a)=>{let r=[...e];t(e=>e.map(e=>e.id===s.id?{...e,stockStatus:a}:e));try{let e={...s,stockStatus:a,categoryId:s.category.id,features:s.features.map(e=>e.text),images:s.images.map(e=>e.url)};if(!(await fetch(`/api/products/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to update stock");S.C.success("Stock status updated")}catch(e){console.error("Failed to update stock:",e),t(r),S.C.error("Failed to update stock status")}},Z=async e=>{if(window.confirm("Are you sure you want to delete this product? This cannot be undone."))try{if(!(await fetch(`/api/products/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete product");t(t=>t.filter(t=>t.id!==e)),S.C.success("Product deleted successfully")}catch(e){console.error("Failed to delete product:",e),S.C.error("Failed to delete product")}},F=async e=>{try{let s=await fetch(`/api/products/${e}/duplicate`,{method:"POST"});if(!s.ok)throw Error("Failed to duplicate product");let a=await s.json();t(e=>[...e,a]),S.C.success("Product duplicated successfully")}catch(e){console.error("Failed to duplicate product:",e),S.C.error("Failed to duplicate product")}},O=async()=>{if(0!==n.size&&window.confirm(`Are you sure you want to delete ${n.size} product(s)? This cannot be undone.`))try{let e=await fetch("/api/products/bulk-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productIds:Array.from(n)})});if(!e.ok)throw Error("Failed to delete products");let s=await e.json();t(e=>e.filter(e=>!n.has(e.id))),v(new Set),S.C.success(s.message)}catch(e){console.error("Failed to bulk delete:",e),S.C.error("Failed to delete products")}},_=async e=>{if(0!==n.size)try{let s=await fetch("/api/products/bulk-update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productIds:Array.from(n),stockStatus:e})});if(!s.ok)throw Error("Failed to update products");let a=await s.json();t(t=>t.map(t=>n.has(t.id)?{...t,stockStatus:e}:t)),v(new Set),S.C.success(a.message)}catch(e){console.error("Failed to bulk update:",e),S.C.error("Failed to update products")}},M=e=>{let t=new Set(n);t.has(e)?t.delete(e):t.add(e),v(t)},T=e.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.sku.toLowerCase().includes(o.toLowerCase())),E=T.length>0&&n.size===T.length;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{let e=(0,N.t)(T),t=new Date().toISOString().split("T")[0];(0,N.E)(e,`products-${t}.csv`),S.C.success("CSV exported successfully")},className:"inline-flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors shadow-sm",children:[r.jsx(u.Z,{className:"w-4 h-4"})," Export CSV"]}),(0,r.jsxs)(i(),{href:"/admin/product/edit/new",className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm",children:[r.jsx(p.Z,{className:"w-4 h-4"})," Add New Product"]})]})]}),n.size>0&&(0,r.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-indigo-900 font-medium",children:[n.size," product(s) selected"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("select",{onChange:e=>{e.target.value&&(_(e.target.value),e.target.value="")},className:"px-3 py-1.5 border border-indigo-300 rounded-md bg-white text-sm",defaultValue:"",children:[r.jsx("option",{value:"",disabled:!0,children:"Update Stock Status"}),k.map(e=>r.jsx("option",{value:e,children:e.replace(/_/g," ")},e))]}),r.jsx("button",{onClick:O,className:"px-4 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm font-medium",children:"Delete Selected"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b bg-gray-50 flex items-center gap-4",children:(0,r.jsxs)("div",{className:"relative flex-grow max-w-md",children:[r.jsx(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx("input",{type:"text",placeholder:"Search by name or SKU...",className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:ring-1 focus:ring-indigo-500",value:o,onChange:e=>l(e.target.value)})]})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-left text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-50 text-gray-500 font-medium border-b",children:[r.jsx("th",{className:"px-6 py-3",children:r.jsx("button",{onClick:()=>{n.size===T.length?v(new Set):v(new Set(T.map(e=>e.id)))},className:"flex items-center",children:E?r.jsx(x.Z,{className:"w-5 h-5 text-indigo-600"}):r.jsx(m.Z,{className:"w-5 h-5"})})}),r.jsx("th",{className:"px-6 py-3",children:"Product"}),r.jsx("th",{className:"px-6 py-3",children:"Category"}),r.jsx("th",{className:"px-6 py-3",children:"Price"}),r.jsx("th",{className:"px-6 py-3",children:"Stock Status (Quick Update)"}),r.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:s?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:r.jsx(g.Z,{className:"w-8 h-8 text-indigo-600 animate-spin mx-auto"})})}):0===T.length?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No products found."})}):T.map(e=>{let t=e.images?.[0]?.url,s=n.has(e.id);return(0,r.jsxs)("tr",{className:`hover:bg-gray-50 transition-colors ${s?"bg-indigo-50":""}`,children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx("button",{onClick:()=>M(e.id),children:s?r.jsx(x.Z,{className:"w-5 h-5 text-indigo-600"}):r.jsx(m.Z,{className:"w-5 h-5 text-gray-400"})})}),r.jsx("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-md bg-gray-100 flex-shrink-0 flex items-center justify-center",children:t?r.jsx(c(),{src:t,alt:e.name,width:40,height:40,className:"object-cover rounded-md"}):r.jsx(y.Z,{className:"w-5 h-5 text-gray-400"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",e.sku]})]})]})}),r.jsx("td",{className:"px-6 py-4 text-gray-600",children:e.category?.name||"N/A"}),r.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.hidePrice?(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-500",title:"Price hidden on catalog",children:[r.jsx(f.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:["$",e.price.toFixed(2)]})]}):`$${e.price.toFixed(2)}`}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("select",{value:e.stockStatus,onChange:t=>P(e,t.target.value),className:`block w-full max-w-[180px] rounded-md border-gray-300 text-sm shadow-sm focus:border-indigo-500 focus:ring-indigo-500 py-1.5 pl-3 pr-8 cursor-pointer
                             ${"IN_STOCK"===e.stockStatus?"bg-green-50 text-green-700 border-green-200":"OUT_OF_STOCK"===e.stockStatus?"bg-red-50 text-red-700 border-red-200":"LOW_STOCK"===e.stockStatus?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-blue-50 text-blue-700 border-blue-200"}`,children:k.map(e=>r.jsx("option",{value:e,children:e.replace(/_/g," ")},e))})}),r.jsx("td",{className:"px-6 py-4 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>F(e.id),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"Duplicate",children:r.jsx(j.Z,{className:"w-4 h-4"})}),r.jsx(i(),{href:`/admin/product/edit/${e.id}`,className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-md transition-colors",title:"Edit",children:r.jsx(b.Z,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>Z(e.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete",children:r.jsx(w.Z,{className:"w-4 h-4"})})]})})]},e.id)})})]})})]})]})};C.getLayout=function(e){return r.jsx(n.AdminLayout,{children:e})};let P=C;a()}catch(e){a(e)}})},8122:(e,t,s)=>{s.d(t,{E:()=>r,t:()=>a});let a=e=>{let t=e=>{if(null==e)return"";let t=String(e);return t.includes(",")||t.includes('"')||t.includes("\n")?`"${t.replace(/"/g,'""')}"`:t};return["SKU,Name,Description,Price,Category,Stock Status,Hide Price,Features,Image URLs,Created At",...e.map(e=>{let s=e.features.map(e=>e.text).join("; "),a=e.images.map(e=>e.url).join("; ");return[t(e.sku),t(e.name),t(e.description),t(e.price.toFixed(2)),t(e.category?.name||""),t(e.stockStatus.replace(/_/g," ")),t(e.hidePrice?"Yes":"No"),t(s),t(a),t(new Date(e.createdAt).toISOString())].join(",")})].join("\n")},r=(e,t="products.csv")=>{let s=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),r=URL.createObjectURL(s);a.setAttribute("href",r),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},6201:e=>{e.exports=import("react-hot-toast")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[567,48,899,529,238],()=>s(8336));module.exports=a})();