"use strict";(()=>{var e={};e.id=22,e.ids=[22,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},6590:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{config:()=>x,default:()=>g,getServerSideProps:()=>p,getStaticPaths:()=>u,getStaticProps:()=>h,reportWebVitals:()=>f,routeModule:()=>w,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>b,unstable_getStaticProps:()=>y});var s=a(7093),l=a(5244),o=a(1323),i=a(2899),n=a.n(i),d=a(6814),c=a(6786),m=e([d,c]);[d,c]=m.then?(await m)():m;let g=(0,o.l)(c,"default"),h=(0,o.l)(c,"getStaticProps"),u=(0,o.l)(c,"getStaticPaths"),p=(0,o.l)(c,"getServerSideProps"),x=(0,o.l)(c,"config"),f=(0,o.l)(c,"reportWebVitals"),y=(0,o.l)(c,"unstable_getStaticProps"),b=(0,o.l)(c,"unstable_getStaticPaths"),j=(0,o.l)(c,"unstable_getStaticParams"),v=(0,o.l)(c,"unstable_getServerProps"),N=(0,o.l)(c,"unstable_getServerSideProps"),w=new s.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/settings/general",pathname:"/admin/settings/general",bundlePath:"",filename:""},components:{App:d.default,Document:n()},userland:c});r()}catch(e){r(e)}})},2259:(e,t,a)=>{a.d(t,{O:()=>c});var r=a(997),s=a(6689),l=a.n(s),o=a(1664),i=a.n(o);let n=(0,a(1462).Z)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);var d=a(245);let c=({items:e})=>(0,r.jsxs)("nav",{className:"flex items-center space-x-2 text-sm text-gray-500 mb-6",children:[(0,r.jsxs)(i(),{href:"/admin",className:"hover:text-gray-700 transition-colors flex items-center gap-1",children:[r.jsx(n,{className:"w-4 h-4"}),r.jsx("span",{children:"Admin"})]}),e.map((e,t)=>(0,r.jsxs)(l().Fragment,{children:[r.jsx(d.Z,{className:"w-4 h-4 text-gray-400"}),e.href?r.jsx(i(),{href:e.href,className:"hover:text-gray-700 transition-colors",children:e.label}):r.jsx("span",{className:"text-gray-900 font-medium",children:e.label})]},t))]})},245:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7886:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},5197:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5809:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(1462).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},6786:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{default:()=>f});var s=a(997),l=a(6689),o=a(6619),i=a(2259),n=a(8154),d=a(7886),c=a(5197),m=a(2770),g=a(5809),h=a(5781),u=a(332),p=e([u]);u=(p.then?(await p)():p)[0];let x=()=>{let{settings:e,refreshSettings:t}=(0,h.T)(),[a,r]=(0,l.useState)({storeName:"",logoUrl:"",faviconUrl:""}),[o,p]=(0,l.useState)(!1),[x,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{e&&r({storeName:e.storeName||"",logoUrl:e.logoUrl||"",faviconUrl:e.faviconUrl||""})},[e]);let y=async(e,t)=>{let a=e.target.files?.[0];if(a){if(!a.type.startsWith("image/")){u.C.error("Please upload an image file");return}if(a.size>5242880){u.C.error("Image size must be less than 5MB");return}"logoUrl"===t&&f(!0);try{let e=new FormData;e.append("file",a);let s=await fetch("/api/upload",{method:"POST",body:e});if(!s.ok)throw Error("Upload failed");let l=await s.json();r(e=>({...e,[t]:l.url})),u.C.success("Image uploaded successfully")}catch(e){console.error("Upload error:",e),u.C.error("Failed to upload image")}finally{"logoUrl"===t&&f(!1),e.target.value=""}}},b=async e=>{e.preventDefault(),p(!0);try{if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to update settings");await t(),u.C.success("Settings updated successfully")}catch(e){console.error("Save error:",e),u.C.error("Failed to save settings")}finally{p(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx(i.O,{items:[{label:"Settings",href:"/admin/settings/general"},{label:"General",href:"/admin/settings/general"}]}),s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"General Settings"})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 max-w-2xl",children:(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Store Name"}),s.jsx("input",{type:"text",value:a.storeName,onChange:e=>r({...a,storeName:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g. My Awesome Store"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Store Logo"}),(0,s.jsxs)("div",{className:"flex items-start gap-6",children:[s.jsx("div",{className:"flex-shrink-0",children:a.logoUrl?(0,s.jsxs)("div",{className:"relative group w-40 h-40 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center overflow-hidden",children:[s.jsx("img",{src:a.logoUrl,alt:"Logo",className:"max-w-full max-h-full object-contain p-2"}),s.jsx("button",{type:"button",onClick:()=>r({...a,logoUrl:""}),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-sm hover:bg-red-600",children:s.jsx(n.Z,{className:"w-4 h-4"})})]}):(0,s.jsxs)("div",{className:"w-40 h-40 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 flex flex-col items-center justify-center text-gray-400",children:[s.jsx(d.Z,{className:"w-8 h-8 mb-2"}),s.jsx("span",{className:"text-xs",children:"No Logo"})]})}),(0,s.jsxs)("div",{className:"flex-grow space-y-3",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Upload a logo for your store. Recommended size: 200x60px. Transparent PNG or SVG works best."}),(0,s.jsxs)("label",{className:"inline-flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors text-sm font-medium text-gray-700 shadow-sm",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:e=>y(e,"logoUrl"),disabled:x,className:"hidden"}),x?(0,s.jsxs)(s.Fragment,{children:[s.jsx(c.Z,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:"Uploading..."})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(m.Z,{className:"w-4 h-4"}),s.jsx("span",{children:"Upload Logo"})]})]})]})]})]}),s.jsx("div",{className:"pt-4 border-t flex justify-end",children:(0,s.jsxs)("button",{type:"submit",disabled:o||x,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 shadow-md font-medium flex items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[o&&s.jsx(c.Z,{className:"w-4 h-4 animate-spin"}),s.jsx(g.Z,{className:"w-4 h-4"}),"Save Changes"]})})]})})]})};x.getLayout=function(e){return s.jsx(o.AdminLayout,{children:e})};let f=x;r()}catch(e){r(e)}})},5244:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},6201:e=>{e.exports=import("react-hot-toast")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[567,48,899,238],()=>a(6590));module.exports=r})();