"use strict";(()=>{var e={};e.id=867,e.ids=[867,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2011:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>h,default:()=>x,getServerSideProps:()=>p,getStaticPaths:()=>m,getStaticProps:()=>g,reportWebVitals:()=>y,routeModule:()=>N,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>b});var a=r(7093),l=r(5244),o=r(1323),c=r(2899),i=r.n(c),d=r(6814),n=r(4251),u=e([d]);d=(u.then?(await u)():u)[0];let x=(0,o.l)(n,"default"),g=(0,o.l)(n,"getStaticProps"),m=(0,o.l)(n,"getStaticPaths"),p=(0,o.l)(n,"getServerSideProps"),h=(0,o.l)(n,"config"),y=(0,o.l)(n,"reportWebVitals"),b=(0,o.l)(n,"unstable_getStaticProps"),f=(0,o.l)(n,"unstable_getStaticPaths"),j=(0,o.l)(n,"unstable_getStaticParams"),v=(0,o.l)(n,"unstable_getServerProps"),S=(0,o.l)(n,"unstable_getServerSideProps"),N=new a.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/admin/analytics",pathname:"/admin/analytics",bundlePath:"",filename:""},components:{App:d.default,Document:i()},userland:n});s()}catch(e){s(e)}})},7372:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(1462).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},9967:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(1462).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7218:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(1462).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},7749:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(1462).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},7886:(e,t,r)=>{r.d(t,{Z:()=>s});let s=(0,r(1462).Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},4251:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var s=r(997),a=r(6689),l=r(6619),o=r(1880),c=r(7969),i=r(7749),d=r(4088),n=r(9967),u=r(7372);let x=(0,r(1462).Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var g=r(7218);let m=()=>{let[e,t]=(0,a.useState)({productCount:0,categoryCount:0,totalStockValue:0,productsInStock:0,productsLowStock:0,productsOutOfStock:0,productsBackorder:0,avgProductPrice:0,stockByCategory:[],recentProducts:[]}),[r,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{l(!0);try{let[e,r]=await Promise.all([fetch("/api/products"),fetch("/api/categories")]);if(!e.ok||!r.ok)throw Error("Failed to fetch data");let s=await e.json(),a=await r.json(),l=s.length,o=a.length,c=s.reduce((e,t)=>e+t.price,0),i=s.filter(e=>"IN_STOCK"===e.stockStatus).length,d=s.filter(e=>"LOW_STOCK"===e.stockStatus).length,n=s.filter(e=>"OUT_OF_STOCK"===e.stockStatus).length,u=s.filter(e=>"BACKORDER"===e.stockStatus).length,x=new Map;s.forEach(e=>{let t=e.category?.name||"Uncategorized",r=x.get(t)||{count:0,value:0};x.set(t,{count:r.count+1,value:r.value+e.price})});let g=Array.from(x.entries()).map(([e,t])=>({name:e,...t})).sort((e,t)=>t.count-e.count).slice(0,5),m=s.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,5);t({productCount:l,categoryCount:o,totalStockValue:c,productsInStock:i,productsLowStock:d,productsOutOfStock:n,productsBackorder:u,avgProductPrice:l>0?c/l:0,stockByCategory:g,recentProducts:m})}catch(e){console.error("Failed to fetch dashboard stats:",e)}finally{l(!1)}})()},[]);let m=[{title:"Total Products",value:e.productCount,icon:o.Z,color:"text-blue-600 bg-blue-100",trend:null},{title:"Total Categories",value:e.categoryCount,icon:c.Z,color:"text-indigo-600 bg-indigo-100",trend:null},{title:"Est. Stock Value",value:`$${e.totalStockValue.toLocaleString()}`,icon:i.Z,color:"text-green-600 bg-green-100",trend:null},{title:"Avg. Product Price",value:`$${e.avgProductPrice.toFixed(2)}`,icon:d.Z,color:"text-amber-600 bg-amber-100",trend:null}],p=[{label:"In Stock",count:e.productsInStock,icon:n.Z,color:"bg-green-50 border-green-200 text-green-700",iconColor:"text-green-600"},{label:"Low Stock",count:e.productsLowStock,icon:u.Z,color:"bg-yellow-50 border-yellow-200 text-yellow-700",iconColor:"text-yellow-600"},{label:"Out of Stock",count:e.productsOutOfStock,icon:x,color:"bg-red-50 border-red-200 text-red-700",iconColor:"text-red-600"},{label:"Backorder",count:e.productsBackorder,icon:g.Z,color:"bg-blue-50 border-blue-200 text-blue-700",iconColor:"text-blue-600"}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Real-time insights into your inventory"})]}),r?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>s.jsx("div",{className:"bg-gray-200 h-36 rounded-xl animate-pulse"},t))}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:m.map(e=>(0,s.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex items-start justify-between hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:e.title}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.value})]}),s.jsx("div",{className:`p-3 rounded-lg ${e.color}`,children:s.jsx(e.icon,{className:"w-6 h-6"})})]},e.title))}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Stock Status Overview"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:p.map(e=>(0,s.jsxs)("div",{className:`p-4 rounded-lg border-2 ${e.color}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(e.icon,{className:`w-5 h-5 ${e.iconColor}`}),s.jsx("span",{className:"text-2xl font-bold",children:e.count})]}),s.jsx("p",{className:"text-sm font-medium",children:e.label})]},e.label))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Top Categories by Product Count"}),0===e.stockByCategory.length?s.jsx("p",{className:"text-gray-500 text-sm",children:"No category data available"}):s.jsx("div",{className:"space-y-4",children:e.stockByCategory.map((t,r)=>{let a=e.productCount>0?t.count/e.productCount*100:0;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:t.name}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[t.count," products"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-500",style:{width:`${a}%`}})}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Est. Value: $",t.value.toFixed(2)]})]},t.name)})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recently Added Products"}),0===e.recentProducts.length?s.jsx("p",{className:"text-gray-500 text-sm",children:"No recent products"}):s.jsx("div",{className:"space-y-3",children:e.recentProducts.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",e.sku]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:["$",e.price.toFixed(2)]}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${"IN_STOCK"===e.stockStatus?"bg-green-100 text-green-700":"LOW_STOCK"===e.stockStatus?"bg-yellow-100 text-yellow-700":"OUT_OF_STOCK"===e.stockStatus?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:e.stockStatus.replace(/_/g," ")})]})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-100 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-3",children:"\uD83D\uDCA1 Quick Insights"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.productsLowStock>0&&(0,s.jsxs)("div",{className:"flex items-start gap-3 bg-white p-4 rounded-lg",children:[s.jsx(u.Z,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Low Stock Alert"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e.productsLowStock," product(s) running low on stock"]})]})]}),e.productsOutOfStock>0&&(0,s.jsxs)("div",{className:"flex items-start gap-3 bg-white p-4 rounded-lg",children:[s.jsx(x,{className:"w-5 h-5 text-red-600 mt-0.5"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Out of Stock"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e.productsOutOfStock," product(s) need restocking"]})]})]}),0===e.productCount&&(0,s.jsxs)("div",{className:"flex items-start gap-3 bg-white p-4 rounded-lg col-span-2",children:[s.jsx(o.Z,{className:"w-5 h-5 text-gray-600 mt-0.5"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Get Started"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Add your first products to start tracking inventory"})]})]})]})]})]})};m.getLayout=function(e){return s.jsx(l.AdminLayout,{children:e})};let p=m},5244:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},6201:e=>{e.exports=import("react-hot-toast")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[567,48,899,238],()=>r(2011));module.exports=s})();