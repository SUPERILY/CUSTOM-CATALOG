"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/settings";
exports.ids = ["pages/api/settings"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsettings&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csettings%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsettings&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csettings%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_settings_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\settings\\index.ts */ \"(api)/./pages/api/settings/index.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_settings_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_settings_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/settings\",\n        pathname: \"/api/settings\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_settings_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNldHRpbmdzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNzZXR0aW5ncyU1Q2luZGV4LnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzZEO0FBQzdEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx5REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMseURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZWxqYXJqaW5pLWNvbXBsZXhlLW5leHRqcy8/OGZmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHNldHRpbmdzXFxcXGluZGV4LnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc2V0dGluZ3NcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zZXR0aW5nc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsettings&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csettings%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/settings/index.ts":
/*!*************************************!*\
  !*** ./pages/api/settings/index.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _services_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../services/db */ \"(api)/./services/db.ts\");\n\nasync function handler(req, res) {\n    try {\n        switch(req.method){\n            case \"GET\":\n                const settings = await _services_db__WEBPACK_IMPORTED_MODULE_0__.DB.getStoreSettings();\n                res.status(200).json(settings);\n                break;\n            case \"PUT\":\n                const { storeName, logoUrl, faviconUrl } = req.body;\n                const updatedSettings = await _services_db__WEBPACK_IMPORTED_MODULE_0__.DB.updateStoreSettings({\n                    storeName,\n                    logoUrl,\n                    faviconUrl\n                });\n                res.status(200).json(updatedSettings);\n                break;\n            default:\n                res.setHeader(\"Allow\", [\n                    \"GET\",\n                    \"PUT\"\n                ]);\n                res.status(405).end(`Method ${req.method} Not Allowed`);\n        }\n    } catch (error) {\n        console.error(\"Store Settings API Error:\", error);\n        res.status(500).json({\n            error: \"Internal Server Error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvc2V0dGluZ3MvaW5kZXgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDZ0Q7QUFFakMsZUFBZUUsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDM0UsSUFBSTtRQUNBLE9BQVFELElBQUlFLE1BQU07WUFDZCxLQUFLO2dCQUNELE1BQU1DLFdBQVcsTUFBTUwsNENBQUVBLENBQUNNLGdCQUFnQjtnQkFDMUNILElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNIO2dCQUNyQjtZQUVKLEtBQUs7Z0JBQ0QsTUFBTSxFQUFFSSxTQUFTLEVBQUVDLE9BQU8sRUFBRUMsVUFBVSxFQUFFLEdBQUdULElBQUlVLElBQUk7Z0JBQ25ELE1BQU1DLGtCQUFrQixNQUFNYiw0Q0FBRUEsQ0FBQ2MsbUJBQW1CLENBQUM7b0JBQUVMO29CQUFXQztvQkFBU0M7Z0JBQVc7Z0JBQ3RGUixJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDSztnQkFDckI7WUFFSjtnQkFDSVYsSUFBSVksU0FBUyxDQUFDLFNBQVM7b0JBQUM7b0JBQU87aUJBQU07Z0JBQ3JDWixJQUFJSSxNQUFNLENBQUMsS0FBS1MsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFZCxJQUFJRSxNQUFNLENBQUMsWUFBWSxDQUFDO1FBQzlEO0lBQ0osRUFBRSxPQUFPYSxPQUFPO1FBQ1pDLFFBQVFELEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDZCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVTLE9BQU87UUFBd0I7SUFDMUQ7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2VsamFyamluaS1jb21wbGV4ZS1uZXh0anMvLi9wYWdlcy9hcGkvc2V0dGluZ3MvaW5kZXgudHM/Mjk3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcclxuaW1wb3J0IHsgREIgYXMgZGIgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9kYic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHN3aXRjaCAocmVxLm1ldGhvZCkge1xyXG4gICAgICAgICAgICBjYXNlICdHRVQnOlxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBkYi5nZXRTdG9yZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihzZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ1BVVCc6XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IHN0b3JlTmFtZSwgbG9nb1VybCwgZmF2aWNvblVybCB9ID0gcmVxLmJvZHk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkU2V0dGluZ3MgPSBhd2FpdCBkYi51cGRhdGVTdG9yZVNldHRpbmdzKHsgc3RvcmVOYW1lLCBsb2dvVXJsLCBmYXZpY29uVXJsIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24odXBkYXRlZFNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnLCAnUFVUJ10pO1xyXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N0b3JlIFNldHRpbmdzIEFQSSBFcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIFNlcnZlciBFcnJvcicgfSk7XHJcbiAgICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkRCIiwiZGIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2V0dGluZ3MiLCJnZXRTdG9yZVNldHRpbmdzIiwic3RhdHVzIiwianNvbiIsInN0b3JlTmFtZSIsImxvZ29VcmwiLCJmYXZpY29uVXJsIiwiYm9keSIsInVwZGF0ZWRTZXR0aW5ncyIsInVwZGF0ZVN0b3JlU2V0dGluZ3MiLCJzZXRIZWFkZXIiLCJlbmQiLCJlcnJvciIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/settings/index.ts\n");

/***/ }),

/***/ "(api)/./services/db.ts":
/*!************************!*\
  !*** ./services/db.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DB: () => (/* binding */ DB)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// Prisma Client Initialization\nlet prisma;\nif (false) {} else {\n    // In development, use a global variable to avoid creating too many connections\n    // during hot-reloading.\n    if (!global.prisma) {\n        global.prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n            log: [\n                \"query\",\n                \"info\",\n                \"warn\",\n                \"error\"\n            ]\n        });\n    }\n    prisma = global.prisma;\n}\nconst DB = {\n    getProducts: async ()=>{\n        const products = await prisma.product.findMany({\n            orderBy: {\n                name: \"asc\"\n            },\n            include: {\n                images: true,\n                category: true,\n                features: true\n            }\n        });\n        return products;\n    },\n    getProductById: async (id)=>{\n        const product = await prisma.product.findUnique({\n            where: {\n                id\n            },\n            include: {\n                images: true,\n                category: true,\n                features: true\n            }\n        });\n        return product;\n    },\n    saveProduct: async (productData)=>{\n        const { id, categoryId, features, images, ...data } = productData;\n        const featureData = features.map((text)=>({\n                text\n            }));\n        const imageData = images.map((url)=>({\n                url\n            }));\n        if (id) {\n            // Update existing product\n            const updatedProduct = await prisma.$transaction(async (tx)=>{\n                await tx.feature.deleteMany({\n                    where: {\n                        productId: id\n                    }\n                });\n                await tx.image.deleteMany({\n                    where: {\n                        productId: id\n                    }\n                });\n                return tx.product.update({\n                    where: {\n                        id\n                    },\n                    data: {\n                        ...data,\n                        category: {\n                            connect: {\n                                id: categoryId\n                            }\n                        },\n                        features: {\n                            create: featureData\n                        },\n                        images: {\n                            create: imageData\n                        }\n                    },\n                    include: {\n                        images: true,\n                        category: true,\n                        features: true\n                    }\n                });\n            });\n            return updatedProduct;\n        } else {\n            // Create new product\n            const newProduct = await prisma.product.create({\n                data: {\n                    ...data,\n                    category: {\n                        connect: {\n                            id: categoryId\n                        }\n                    },\n                    features: {\n                        create: featureData\n                    },\n                    images: {\n                        create: imageData\n                    }\n                },\n                include: {\n                    images: true,\n                    category: true,\n                    features: true\n                }\n            });\n            return newProduct;\n        }\n    },\n    deleteProduct: async (id)=>{\n        await prisma.product.delete({\n            where: {\n                id\n            }\n        });\n    },\n    duplicateProduct: async (id)=>{\n        const original = await prisma.product.findUnique({\n            where: {\n                id\n            },\n            include: {\n                images: true,\n                category: true,\n                features: true\n            }\n        });\n        if (!original) {\n            throw new Error(\"Product not found\");\n        }\n        // Generate unique SKU\n        let newSku = `${original.sku}-COPY`;\n        let counter = 1;\n        while(await prisma.product.findFirst({\n            where: {\n                sku: newSku\n            }\n        })){\n            newSku = `${original.sku}-COPY${counter}`;\n            counter++;\n        }\n        // Create duplicate\n        const duplicate = await prisma.product.create({\n            data: {\n                name: `${original.name} (Copy)`,\n                sku: newSku,\n                description: original.description,\n                price: original.price,\n                hidePrice: original.hidePrice,\n                stockStatus: original.stockStatus,\n                category: {\n                    connect: {\n                        id: original.categoryId\n                    }\n                },\n                features: {\n                    create: original.features.map((f)=>({\n                            text: f.text\n                        }))\n                },\n                images: {\n                    create: original.images.map((i)=>({\n                            url: i.url\n                        }))\n                }\n            },\n            include: {\n                images: true,\n                category: true,\n                features: true\n            }\n        });\n        return duplicate;\n    },\n    getCategories: async ()=>{\n        return prisma.category.findMany({\n            orderBy: {\n                displayOrder: \"asc\"\n            }\n        });\n    },\n    saveCategory: async (categoryData)=>{\n        if (categoryData.id) {\n            return prisma.category.update({\n                where: {\n                    id: categoryData.id\n                },\n                data: categoryData\n            });\n        } else {\n            return prisma.category.create({\n                data: categoryData\n            });\n        }\n    },\n    deleteCategory: async (id)=>{\n        await prisma.category.delete({\n            where: {\n                id\n            }\n        });\n    },\n    getBanners: async ()=>{\n        return prisma.banner.findMany({\n            orderBy: {\n                displayOrder: \"asc\"\n            }\n        });\n    },\n    getBannerById: async (id)=>{\n        return prisma.banner.findUnique({\n            where: {\n                id\n            }\n        });\n    },\n    createBanner: async (banner)=>{\n        return prisma.banner.create({\n            data: banner\n        });\n    },\n    updateBanner: async (id, banner)=>{\n        return prisma.banner.update({\n            where: {\n                id\n            },\n            data: banner\n        });\n    },\n    deleteBanner: async (id)=>{\n        await prisma.banner.delete({\n            where: {\n                id\n            }\n        });\n    },\n    // Legacy method for backward compatibility\n    getBanner: async ()=>{\n        const banners = await prisma.banner.findMany({\n            where: {\n                isActive: true\n            },\n            orderBy: {\n                displayOrder: \"asc\"\n            },\n            take: 1\n        });\n        if (banners.length > 0) {\n            return banners[0];\n        }\n        // Create default banner if none exists\n        return prisma.banner.create({\n            data: {\n                title: \"Welcome to the Catalog\",\n                subtitle: \"Explore our products.\",\n                imageUrl: \"https://picsum.photos/seed/banner/1200/400\",\n                linkText: \"Explore\",\n                linkUrl: \"#catalog\",\n                isActive: true,\n                displayOrder: 0\n            }\n        });\n    },\n    // Legacy method for backward compatibility\n    saveBanner: async (banner)=>{\n        const existing = await prisma.banner.findFirst({\n            orderBy: {\n                displayOrder: \"asc\"\n            }\n        });\n        if (existing) {\n            return prisma.banner.update({\n                where: {\n                    id: existing.id\n                },\n                data: banner\n            });\n        }\n        return prisma.banner.create({\n            data: {\n                title: banner.title || \"\",\n                subtitle: banner.subtitle || \"\",\n                imageUrl: banner.imageUrl || \"\",\n                mobileImageUrl: banner.mobileImageUrl || null,\n                linkText: banner.linkText || \"\",\n                linkUrl: banner.linkUrl || \"\",\n                isActive: banner.isActive ?? true,\n                displayOrder: banner.displayOrder ?? 0\n            }\n        });\n    },\n    // Stock Status Methods\n    async getStockStatuses () {\n        // Ensure defaults exist first\n        const count = await prisma.stockStatus.count();\n        if (count === 0) {\n            await this.seedStockStatuses();\n        }\n        return prisma.stockStatus.findMany({\n            orderBy: {\n                label: \"asc\"\n            }\n        });\n    },\n    async createStockStatus (data) {\n        return prisma.stockStatus.create({\n            data: {\n                ...data,\n                isDefault: false\n            }\n        });\n    },\n    async updateStockStatus (id, data) {\n        return prisma.stockStatus.update({\n            where: {\n                id\n            },\n            data\n        });\n    },\n    async deleteStockStatus (id) {\n        return prisma.stockStatus.delete({\n            where: {\n                id\n            }\n        });\n    },\n    async seedStockStatuses () {\n        const defaults = [\n            {\n                label: \"In Stock\",\n                value: \"IN_STOCK\",\n                color: \"green\"\n            },\n            {\n                label: \"Low Stock\",\n                value: \"LOW_STOCK\",\n                color: \"yellow\"\n            },\n            {\n                label: \"Out of Stock\",\n                value: \"OUT_OF_STOCK\",\n                color: \"red\"\n            },\n            {\n                label: \"Backorder\",\n                value: \"BACKORDER\",\n                color: \"orange\"\n            }\n        ];\n        for (const status of defaults){\n            await prisma.stockStatus.upsert({\n                where: {\n                    value: status.value\n                },\n                update: {},\n                create: {\n                    label: status.label,\n                    value: status.value,\n                    color: status.color,\n                    isDefault: true\n                }\n            });\n        }\n    },\n    // Store Settings Methods\n    async getStoreSettings () {\n        let settings = await prisma.storeSettings.findUnique({\n            where: {\n                id: \"default\"\n            }\n        });\n        if (!settings) {\n            settings = await prisma.storeSettings.create({\n                data: {\n                    id: \"default\",\n                    storeName: \"Eljarjini Complexe\"\n                }\n            });\n        }\n        return settings;\n    },\n    async updateStoreSettings (data) {\n        // Ensure it exists first\n        await this.getStoreSettings();\n        return prisma.storeSettings.update({\n            where: {\n                id: \"default\"\n            },\n            data\n        });\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zZXJ2aWNlcy9kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFHOUMsK0JBQStCO0FBQy9CLElBQUlDO0FBRUosSUFBSUMsS0FBeUIsRUFBYyxFQUUxQyxNQUFNO0lBQ0wsK0VBQStFO0lBQy9FLHdCQUF3QjtJQUN4QixJQUFJLENBQUNDLE9BQU9GLE1BQU0sRUFBRTtRQUNsQkUsT0FBT0YsTUFBTSxHQUFHLElBQUlELHdEQUFZQSxDQUFDO1lBQy9CSSxLQUFLO2dCQUFDO2dCQUFTO2dCQUFRO2dCQUFRO2FBQVE7UUFDekM7SUFDRjtJQUNBSCxTQUFTRSxPQUFPRixNQUFNO0FBQ3hCO0FBRU8sTUFBTUksS0FBSztJQUNoQkMsYUFBYTtRQUNYLE1BQU1DLFdBQVcsTUFBTU4sT0FBT08sT0FBTyxDQUFDQyxRQUFRLENBQUM7WUFDN0NDLFNBQVM7Z0JBQUVDLE1BQU07WUFBTTtZQUN2QkMsU0FBUztnQkFDUEMsUUFBUTtnQkFDUkMsVUFBVTtnQkFDVkMsVUFBVTtZQUNaO1FBQ0Y7UUFDQSxPQUFPUjtJQUNUO0lBRUFTLGdCQUFnQixPQUFPQztRQUNyQixNQUFNVCxVQUFVLE1BQU1QLE9BQU9PLE9BQU8sQ0FBQ1UsVUFBVSxDQUFDO1lBQzlDQyxPQUFPO2dCQUFFRjtZQUFHO1lBQ1pMLFNBQVM7Z0JBQ1BDLFFBQVE7Z0JBQ1JDLFVBQVU7Z0JBQ1ZDLFVBQVU7WUFDWjtRQUNGO1FBQ0EsT0FBT1A7SUFDVDtJQUVBWSxhQUFhLE9BQU9DO1FBQ2xCLE1BQU0sRUFBRUosRUFBRSxFQUFFSyxVQUFVLEVBQUVQLFFBQVEsRUFBRUYsTUFBTSxFQUFFLEdBQUdVLE1BQU0sR0FBR0Y7UUFFdEQsTUFBTUcsY0FBY1QsU0FBU1UsR0FBRyxDQUFDQyxDQUFBQSxPQUFTO2dCQUFFQTtZQUFLO1FBQ2pELE1BQU1DLFlBQVlkLE9BQU9ZLEdBQUcsQ0FBQ0csQ0FBQUEsTUFBUTtnQkFBRUE7WUFBSTtRQUUzQyxJQUFJWCxJQUFJO1lBQ04sMEJBQTBCO1lBQzFCLE1BQU1ZLGlCQUFpQixNQUFNNUIsT0FBTzZCLFlBQVksQ0FBQyxPQUFPQztnQkFDdEQsTUFBTUEsR0FBR0MsT0FBTyxDQUFDQyxVQUFVLENBQUM7b0JBQUVkLE9BQU87d0JBQUVlLFdBQVdqQjtvQkFBRztnQkFBRTtnQkFDdkQsTUFBTWMsR0FBR0ksS0FBSyxDQUFDRixVQUFVLENBQUM7b0JBQUVkLE9BQU87d0JBQUVlLFdBQVdqQjtvQkFBRztnQkFBRTtnQkFFckQsT0FBT2MsR0FBR3ZCLE9BQU8sQ0FBQzRCLE1BQU0sQ0FBQztvQkFDdkJqQixPQUFPO3dCQUFFRjtvQkFBRztvQkFDWk0sTUFBTTt3QkFDSixHQUFHQSxJQUFJO3dCQUNQVCxVQUFVOzRCQUFFdUIsU0FBUztnQ0FBRXBCLElBQUlLOzRCQUFXO3dCQUFFO3dCQUN4Q1AsVUFBVTs0QkFBRXVCLFFBQVFkO3dCQUFZO3dCQUNoQ1gsUUFBUTs0QkFBRXlCLFFBQVFYO3dCQUFVO29CQUM5QjtvQkFDQWYsU0FBUzt3QkFDUEMsUUFBUTt3QkFDUkMsVUFBVTt3QkFDVkMsVUFBVTtvQkFDWjtnQkFDRjtZQUNGO1lBQ0EsT0FBT2M7UUFDVCxPQUFPO1lBQ0wscUJBQXFCO1lBQ3JCLE1BQU1VLGFBQWEsTUFBTXRDLE9BQU9PLE9BQU8sQ0FBQzhCLE1BQU0sQ0FBQztnQkFDN0NmLE1BQU07b0JBQ0osR0FBR0EsSUFBSTtvQkFDUFQsVUFBVTt3QkFBRXVCLFNBQVM7NEJBQUVwQixJQUFJSzt3QkFBVztvQkFBRTtvQkFDeENQLFVBQVU7d0JBQUV1QixRQUFRZDtvQkFBWTtvQkFDaENYLFFBQVE7d0JBQUV5QixRQUFRWDtvQkFBVTtnQkFDOUI7Z0JBQ0FmLFNBQVM7b0JBQ1BDLFFBQVE7b0JBQ1JDLFVBQVU7b0JBQ1ZDLFVBQVU7Z0JBQ1o7WUFDRjtZQUNBLE9BQU93QjtRQUNUO0lBQ0Y7SUFFQUMsZUFBZSxPQUFPdkI7UUFDcEIsTUFBTWhCLE9BQU9PLE9BQU8sQ0FBQ2lDLE1BQU0sQ0FBQztZQUFFdEIsT0FBTztnQkFBRUY7WUFBRztRQUFFO0lBQzlDO0lBRUF5QixrQkFBa0IsT0FBT3pCO1FBQ3ZCLE1BQU0wQixXQUFXLE1BQU0xQyxPQUFPTyxPQUFPLENBQUNVLFVBQVUsQ0FBQztZQUMvQ0MsT0FBTztnQkFBRUY7WUFBRztZQUNaTCxTQUFTO2dCQUNQQyxRQUFRO2dCQUNSQyxVQUFVO2dCQUNWQyxVQUFVO1lBQ1o7UUFDRjtRQUVBLElBQUksQ0FBQzRCLFVBQVU7WUFDYixNQUFNLElBQUlDLE1BQU07UUFDbEI7UUFFQSxzQkFBc0I7UUFDdEIsSUFBSUMsU0FBUyxDQUFDLEVBQUVGLFNBQVNHLEdBQUcsQ0FBQyxLQUFLLENBQUM7UUFDbkMsSUFBSUMsVUFBVTtRQUVkLE1BQU8sTUFBTTlDLE9BQU9PLE9BQU8sQ0FBQ3dDLFNBQVMsQ0FBQztZQUFFN0IsT0FBTztnQkFBRTJCLEtBQUtEO1lBQU87UUFBRSxHQUFJO1lBQ2pFQSxTQUFTLENBQUMsRUFBRUYsU0FBU0csR0FBRyxDQUFDLEtBQUssRUFBRUMsUUFBUSxDQUFDO1lBQ3pDQTtRQUNGO1FBRUEsbUJBQW1CO1FBQ25CLE1BQU1FLFlBQVksTUFBTWhELE9BQU9PLE9BQU8sQ0FBQzhCLE1BQU0sQ0FBQztZQUM1Q2YsTUFBTTtnQkFDSlosTUFBTSxDQUFDLEVBQUVnQyxTQUFTaEMsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDL0JtQyxLQUFLRDtnQkFDTEssYUFBYVAsU0FBU08sV0FBVztnQkFDakNDLE9BQU9SLFNBQVNRLEtBQUs7Z0JBQ3JCQyxXQUFXVCxTQUFTUyxTQUFTO2dCQUM3QkMsYUFBYVYsU0FBU1UsV0FBVztnQkFDakN2QyxVQUFVO29CQUFFdUIsU0FBUzt3QkFBRXBCLElBQUkwQixTQUFTckIsVUFBVTtvQkFBQztnQkFBRTtnQkFDakRQLFVBQVU7b0JBQ1J1QixRQUFRSyxTQUFTNUIsUUFBUSxDQUFDVSxHQUFHLENBQUM2QixDQUFBQSxJQUFNOzRCQUFFNUIsTUFBTTRCLEVBQUU1QixJQUFJO3dCQUFDO2dCQUNyRDtnQkFDQWIsUUFBUTtvQkFDTnlCLFFBQVFLLFNBQVM5QixNQUFNLENBQUNZLEdBQUcsQ0FBQzhCLENBQUFBLElBQU07NEJBQUUzQixLQUFLMkIsRUFBRTNCLEdBQUc7d0JBQUM7Z0JBQ2pEO1lBQ0Y7WUFDQWhCLFNBQVM7Z0JBQ1BDLFFBQVE7Z0JBQ1JDLFVBQVU7Z0JBQ1ZDLFVBQVU7WUFDWjtRQUNGO1FBRUEsT0FBT2tDO0lBQ1Q7SUFFQU8sZUFBZTtRQUNiLE9BQU92RCxPQUFPYSxRQUFRLENBQUNMLFFBQVEsQ0FBQztZQUM5QkMsU0FBUztnQkFBRStDLGNBQWM7WUFBTTtRQUNqQztJQUNGO0lBRUFDLGNBQWMsT0FBT0M7UUFDbkIsSUFBSUEsYUFBYTFDLEVBQUUsRUFBRTtZQUNuQixPQUFPaEIsT0FBT2EsUUFBUSxDQUFDc0IsTUFBTSxDQUFDO2dCQUM1QmpCLE9BQU87b0JBQUVGLElBQUkwQyxhQUFhMUMsRUFBRTtnQkFBQztnQkFDN0JNLE1BQU1vQztZQUNSO1FBQ0YsT0FBTztZQUNMLE9BQU8xRCxPQUFPYSxRQUFRLENBQUN3QixNQUFNLENBQUM7Z0JBQzVCZixNQUFNb0M7WUFDUjtRQUNGO0lBQ0Y7SUFFQUMsZ0JBQWdCLE9BQU8zQztRQUNyQixNQUFNaEIsT0FBT2EsUUFBUSxDQUFDMkIsTUFBTSxDQUFDO1lBQUV0QixPQUFPO2dCQUFFRjtZQUFHO1FBQUU7SUFDL0M7SUFFQTRDLFlBQVk7UUFDVixPQUFPNUQsT0FBTzZELE1BQU0sQ0FBQ3JELFFBQVEsQ0FBQztZQUM1QkMsU0FBUztnQkFBRStDLGNBQWM7WUFBTTtRQUNqQztJQUNGO0lBRUFNLGVBQWUsT0FBTzlDO1FBQ3BCLE9BQU9oQixPQUFPNkQsTUFBTSxDQUFDNUMsVUFBVSxDQUFDO1lBQzlCQyxPQUFPO2dCQUFFRjtZQUFHO1FBQ2Q7SUFDRjtJQUVBK0MsY0FBYyxPQUFPRjtRQUNuQixPQUFPN0QsT0FBTzZELE1BQU0sQ0FBQ3hCLE1BQU0sQ0FBQztZQUMxQmYsTUFBTXVDO1FBQ1I7SUFDRjtJQUVBRyxjQUFjLE9BQU9oRCxJQUFZNkM7UUFDL0IsT0FBTzdELE9BQU82RCxNQUFNLENBQUMxQixNQUFNLENBQUM7WUFDMUJqQixPQUFPO2dCQUFFRjtZQUFHO1lBQ1pNLE1BQU11QztRQUNSO0lBQ0Y7SUFFQUksY0FBYyxPQUFPakQ7UUFDbkIsTUFBTWhCLE9BQU82RCxNQUFNLENBQUNyQixNQUFNLENBQUM7WUFDekJ0QixPQUFPO2dCQUFFRjtZQUFHO1FBQ2Q7SUFDRjtJQUVBLDJDQUEyQztJQUMzQ2tELFdBQVc7UUFDVCxNQUFNQyxVQUFVLE1BQU1uRSxPQUFPNkQsTUFBTSxDQUFDckQsUUFBUSxDQUFDO1lBQzNDVSxPQUFPO2dCQUFFa0QsVUFBVTtZQUFLO1lBQ3hCM0QsU0FBUztnQkFBRStDLGNBQWM7WUFBTTtZQUMvQmEsTUFBTTtRQUNSO1FBRUEsSUFBSUYsUUFBUUcsTUFBTSxHQUFHLEdBQUc7WUFDdEIsT0FBT0gsT0FBTyxDQUFDLEVBQUU7UUFDbkI7UUFFQSx1Q0FBdUM7UUFDdkMsT0FBT25FLE9BQU82RCxNQUFNLENBQUN4QixNQUFNLENBQUM7WUFDMUJmLE1BQU07Z0JBQ0ppRCxPQUFPO2dCQUNQQyxVQUFVO2dCQUNWQyxVQUFVO2dCQUNWQyxVQUFVO2dCQUNWQyxTQUFTO2dCQUNUUCxVQUFVO2dCQUNWWixjQUFjO1lBQ2hCO1FBQ0Y7SUFDRjtJQUVBLDJDQUEyQztJQUMzQ29CLFlBQVksT0FBT2Y7UUFDakIsTUFBTWdCLFdBQVcsTUFBTTdFLE9BQU82RCxNQUFNLENBQUNkLFNBQVMsQ0FBQztZQUM3Q3RDLFNBQVM7Z0JBQUUrQyxjQUFjO1lBQU07UUFDakM7UUFFQSxJQUFJcUIsVUFBVTtZQUNaLE9BQU83RSxPQUFPNkQsTUFBTSxDQUFDMUIsTUFBTSxDQUFDO2dCQUMxQmpCLE9BQU87b0JBQUVGLElBQUk2RCxTQUFTN0QsRUFBRTtnQkFBQztnQkFDekJNLE1BQU11QztZQUNSO1FBQ0Y7UUFFQSxPQUFPN0QsT0FBTzZELE1BQU0sQ0FBQ3hCLE1BQU0sQ0FBQztZQUMxQmYsTUFBTTtnQkFDSmlELE9BQU9WLE9BQU9VLEtBQUssSUFBSTtnQkFDdkJDLFVBQVVYLE9BQU9XLFFBQVEsSUFBSTtnQkFDN0JDLFVBQVVaLE9BQU9ZLFFBQVEsSUFBSTtnQkFDN0JLLGdCQUFnQmpCLE9BQU9pQixjQUFjLElBQUk7Z0JBQ3pDSixVQUFVYixPQUFPYSxRQUFRLElBQUk7Z0JBQzdCQyxTQUFTZCxPQUFPYyxPQUFPLElBQUk7Z0JBQzNCUCxVQUFVUCxPQUFPTyxRQUFRLElBQUk7Z0JBQzdCWixjQUFjSyxPQUFPTCxZQUFZLElBQUk7WUFDdkM7UUFDRjtJQUNGO0lBRUEsdUJBQXVCO0lBQ3ZCLE1BQU11QjtRQUNKLDhCQUE4QjtRQUM5QixNQUFNQyxRQUFRLE1BQU1oRixPQUFPb0QsV0FBVyxDQUFDNEIsS0FBSztRQUM1QyxJQUFJQSxVQUFVLEdBQUc7WUFDZixNQUFNLElBQUksQ0FBQ0MsaUJBQWlCO1FBQzlCO1FBQ0EsT0FBT2pGLE9BQU9vRCxXQUFXLENBQUM1QyxRQUFRLENBQUM7WUFDakNDLFNBQVM7Z0JBQUV5RSxPQUFPO1lBQU07UUFDMUI7SUFDRjtJQUVBLE1BQU1DLG1CQUFrQjdELElBQXFEO1FBQzNFLE9BQU90QixPQUFPb0QsV0FBVyxDQUFDZixNQUFNLENBQUM7WUFDL0JmLE1BQU07Z0JBQ0osR0FBR0EsSUFBSTtnQkFDUDhELFdBQVc7WUFDYjtRQUNGO0lBQ0Y7SUFFQSxNQUFNQyxtQkFBa0JyRSxFQUFVLEVBQUVNLElBQXdDO1FBQzFFLE9BQU90QixPQUFPb0QsV0FBVyxDQUFDakIsTUFBTSxDQUFDO1lBQy9CakIsT0FBTztnQkFBRUY7WUFBRztZQUNaTTtRQUNGO0lBQ0Y7SUFFQSxNQUFNZ0UsbUJBQWtCdEUsRUFBVTtRQUNoQyxPQUFPaEIsT0FBT29ELFdBQVcsQ0FBQ1osTUFBTSxDQUFDO1lBQy9CdEIsT0FBTztnQkFBRUY7WUFBRztRQUNkO0lBQ0Y7SUFFQSxNQUFNaUU7UUFDSixNQUFNTSxXQUFXO1lBQ2Y7Z0JBQUVMLE9BQU87Z0JBQVlNLE9BQU87Z0JBQVlDLE9BQU87WUFBUTtZQUN2RDtnQkFBRVAsT0FBTztnQkFBYU0sT0FBTztnQkFBYUMsT0FBTztZQUFTO1lBQzFEO2dCQUFFUCxPQUFPO2dCQUFnQk0sT0FBTztnQkFBZ0JDLE9BQU87WUFBTTtZQUM3RDtnQkFBRVAsT0FBTztnQkFBYU0sT0FBTztnQkFBYUMsT0FBTztZQUFTO1NBQzNEO1FBRUQsS0FBSyxNQUFNQyxVQUFVSCxTQUFVO1lBQzdCLE1BQU12RixPQUFPb0QsV0FBVyxDQUFDdUMsTUFBTSxDQUFDO2dCQUM5QnpFLE9BQU87b0JBQUVzRSxPQUFPRSxPQUFPRixLQUFLO2dCQUFDO2dCQUM3QnJELFFBQVEsQ0FBQztnQkFDVEUsUUFBUTtvQkFDTjZDLE9BQU9RLE9BQU9SLEtBQUs7b0JBQ25CTSxPQUFPRSxPQUFPRixLQUFLO29CQUNuQkMsT0FBT0MsT0FBT0QsS0FBSztvQkFDbkJMLFdBQVc7Z0JBQ2I7WUFDRjtRQUNGO0lBQ0Y7SUFFQSx5QkFBeUI7SUFDekIsTUFBTVE7UUFDSixJQUFJQyxXQUFXLE1BQU03RixPQUFPOEYsYUFBYSxDQUFDN0UsVUFBVSxDQUFDO1lBQ25EQyxPQUFPO2dCQUFFRixJQUFJO1lBQVU7UUFDekI7UUFFQSxJQUFJLENBQUM2RSxVQUFVO1lBQ2JBLFdBQVcsTUFBTTdGLE9BQU84RixhQUFhLENBQUN6RCxNQUFNLENBQUM7Z0JBQzNDZixNQUFNO29CQUNKTixJQUFJO29CQUNKK0UsV0FBVztnQkFDYjtZQUNGO1FBQ0Y7UUFDQSxPQUFPRjtJQUNUO0lBRUEsTUFBTUcscUJBQW9CMUUsSUFBbUU7UUFDM0YseUJBQXlCO1FBQ3pCLE1BQU0sSUFBSSxDQUFDc0UsZ0JBQWdCO1FBRTNCLE9BQU81RixPQUFPOEYsYUFBYSxDQUFDM0QsTUFBTSxDQUFDO1lBQ2pDakIsT0FBTztnQkFBRUYsSUFBSTtZQUFVO1lBQ3ZCTTtRQUNGO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZWxqYXJqaW5pLWNvbXBsZXhlLW5leHRqcy8uL3NlcnZpY2VzL2RiLnRzP2RjZjgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuaW1wb3J0IHsgUHJvZHVjdCwgQ2F0ZWdvcnksIEJhbm5lciwgU3RvY2tTdGF0dXMgfSBmcm9tICcuLi90eXBlcyc7XG5cbi8vIFByaXNtYSBDbGllbnQgSW5pdGlhbGl6YXRpb25cbmxldCBwcmlzbWE6IFByaXNtYUNsaWVudDtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xufSBlbHNlIHtcbiAgLy8gSW4gZGV2ZWxvcG1lbnQsIHVzZSBhIGdsb2JhbCB2YXJpYWJsZSB0byBhdm9pZCBjcmVhdGluZyB0b28gbWFueSBjb25uZWN0aW9uc1xuICAvLyBkdXJpbmcgaG90LXJlbG9hZGluZy5cbiAgaWYgKCFnbG9iYWwucHJpc21hKSB7XG4gICAgZ2xvYmFsLnByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoe1xuICAgICAgbG9nOiBbJ3F1ZXJ5JywgJ2luZm8nLCAnd2FybicsICdlcnJvciddLFxuICAgIH0pO1xuICB9XG4gIHByaXNtYSA9IGdsb2JhbC5wcmlzbWE7XG59XG5cbmV4cG9ydCBjb25zdCBEQiA9IHtcbiAgZ2V0UHJvZHVjdHM6IGFzeW5jICgpOiBQcm9taXNlPFByb2R1Y3RbXT4gPT4ge1xuICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgcHJpc21hLnByb2R1Y3QuZmluZE1hbnkoe1xuICAgICAgb3JkZXJCeTogeyBuYW1lOiAnYXNjJyB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBpbWFnZXM6IHRydWUsXG4gICAgICAgIGNhdGVnb3J5OiB0cnVlLFxuICAgICAgICBmZWF0dXJlczogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgcmV0dXJuIHByb2R1Y3RzIGFzIFByb2R1Y3RbXTtcbiAgfSxcblxuICBnZXRQcm9kdWN0QnlJZDogYXN5bmMgKGlkOiBzdHJpbmcpOiBQcm9taXNlPFByb2R1Y3QgfCBudWxsPiA9PiB7XG4gICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHByaXNtYS5wcm9kdWN0LmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgaW1hZ2VzOiB0cnVlLFxuICAgICAgICBjYXRlZ29yeTogdHJ1ZSxcbiAgICAgICAgZmVhdHVyZXM6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBwcm9kdWN0IGFzIFByb2R1Y3QgfCBudWxsO1xuICB9LFxuXG4gIHNhdmVQcm9kdWN0OiBhc3luYyAocHJvZHVjdERhdGE6IE9taXQ8UHJvZHVjdCwgJ2lkJyB8ICdjYXRlZ29yeScgfCAnaW1hZ2VzJyB8ICdmZWF0dXJlcycgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPiAmIHsgaWQ/OiBzdHJpbmcsIGNhdGVnb3J5SWQ6IHN0cmluZywgZmVhdHVyZXM6IHN0cmluZ1tdLCBpbWFnZXM6IHN0cmluZ1tdIH0pOiBQcm9taXNlPFByb2R1Y3Q+ID0+IHtcbiAgICBjb25zdCB7IGlkLCBjYXRlZ29yeUlkLCBmZWF0dXJlcywgaW1hZ2VzLCAuLi5kYXRhIH0gPSBwcm9kdWN0RGF0YTtcblxuICAgIGNvbnN0IGZlYXR1cmVEYXRhID0gZmVhdHVyZXMubWFwKHRleHQgPT4gKHsgdGV4dCB9KSk7XG4gICAgY29uc3QgaW1hZ2VEYXRhID0gaW1hZ2VzLm1hcCh1cmwgPT4gKHsgdXJsIH0pKTtcblxuICAgIGlmIChpZCkge1xuICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHByb2R1Y3RcbiAgICAgIGNvbnN0IHVwZGF0ZWRQcm9kdWN0ID0gYXdhaXQgcHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHgpID0+IHtcbiAgICAgICAgYXdhaXQgdHguZmVhdHVyZS5kZWxldGVNYW55KHsgd2hlcmU6IHsgcHJvZHVjdElkOiBpZCB9IH0pO1xuICAgICAgICBhd2FpdCB0eC5pbWFnZS5kZWxldGVNYW55KHsgd2hlcmU6IHsgcHJvZHVjdElkOiBpZCB9IH0pO1xuXG4gICAgICAgIHJldHVybiB0eC5wcm9kdWN0LnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAuLi5kYXRhLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IHsgY29ubmVjdDogeyBpZDogY2F0ZWdvcnlJZCB9IH0sXG4gICAgICAgICAgICBmZWF0dXJlczogeyBjcmVhdGU6IGZlYXR1cmVEYXRhIH0sXG4gICAgICAgICAgICBpbWFnZXM6IHsgY3JlYXRlOiBpbWFnZURhdGEgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgIGltYWdlczogdHJ1ZSxcbiAgICAgICAgICAgIGNhdGVnb3J5OiB0cnVlLFxuICAgICAgICAgICAgZmVhdHVyZXM6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB1cGRhdGVkUHJvZHVjdCBhcyBQcm9kdWN0O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdGUgbmV3IHByb2R1Y3RcbiAgICAgIGNvbnN0IG5ld1Byb2R1Y3QgPSBhd2FpdCBwcmlzbWEucHJvZHVjdC5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBjYXRlZ29yeTogeyBjb25uZWN0OiB7IGlkOiBjYXRlZ29yeUlkIH0gfSxcbiAgICAgICAgICBmZWF0dXJlczogeyBjcmVhdGU6IGZlYXR1cmVEYXRhIH0sXG4gICAgICAgICAgaW1hZ2VzOiB7IGNyZWF0ZTogaW1hZ2VEYXRhIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBpbWFnZXM6IHRydWUsXG4gICAgICAgICAgY2F0ZWdvcnk6IHRydWUsXG4gICAgICAgICAgZmVhdHVyZXM6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBuZXdQcm9kdWN0IGFzIFByb2R1Y3Q7XG4gICAgfVxuICB9LFxuXG4gIGRlbGV0ZVByb2R1Y3Q6IGFzeW5jIChpZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgYXdhaXQgcHJpc21hLnByb2R1Y3QuZGVsZXRlKHsgd2hlcmU6IHsgaWQgfSB9KTtcbiAgfSxcblxuICBkdXBsaWNhdGVQcm9kdWN0OiBhc3luYyAoaWQ6IHN0cmluZyk6IFByb21pc2U8UHJvZHVjdD4gPT4ge1xuICAgIGNvbnN0IG9yaWdpbmFsID0gYXdhaXQgcHJpc21hLnByb2R1Y3QuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBpbWFnZXM6IHRydWUsXG4gICAgICAgIGNhdGVnb3J5OiB0cnVlLFxuICAgICAgICBmZWF0dXJlczogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIW9yaWdpbmFsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb2R1Y3Qgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgdW5pcXVlIFNLVVxuICAgIGxldCBuZXdTa3UgPSBgJHtvcmlnaW5hbC5za3V9LUNPUFlgO1xuICAgIGxldCBjb3VudGVyID0gMTtcblxuICAgIHdoaWxlIChhd2FpdCBwcmlzbWEucHJvZHVjdC5maW5kRmlyc3QoeyB3aGVyZTogeyBza3U6IG5ld1NrdSB9IH0pKSB7XG4gICAgICBuZXdTa3UgPSBgJHtvcmlnaW5hbC5za3V9LUNPUFkke2NvdW50ZXJ9YDtcbiAgICAgIGNvdW50ZXIrKztcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgZHVwbGljYXRlXG4gICAgY29uc3QgZHVwbGljYXRlID0gYXdhaXQgcHJpc21hLnByb2R1Y3QuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbmFtZTogYCR7b3JpZ2luYWwubmFtZX0gKENvcHkpYCxcbiAgICAgICAgc2t1OiBuZXdTa3UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBvcmlnaW5hbC5kZXNjcmlwdGlvbixcbiAgICAgICAgcHJpY2U6IG9yaWdpbmFsLnByaWNlLFxuICAgICAgICBoaWRlUHJpY2U6IG9yaWdpbmFsLmhpZGVQcmljZSxcbiAgICAgICAgc3RvY2tTdGF0dXM6IG9yaWdpbmFsLnN0b2NrU3RhdHVzLFxuICAgICAgICBjYXRlZ29yeTogeyBjb25uZWN0OiB7IGlkOiBvcmlnaW5hbC5jYXRlZ29yeUlkIH0gfSxcbiAgICAgICAgZmVhdHVyZXM6IHtcbiAgICAgICAgICBjcmVhdGU6IG9yaWdpbmFsLmZlYXR1cmVzLm1hcChmID0+ICh7IHRleHQ6IGYudGV4dCB9KSksXG4gICAgICAgIH0sXG4gICAgICAgIGltYWdlczoge1xuICAgICAgICAgIGNyZWF0ZTogb3JpZ2luYWwuaW1hZ2VzLm1hcChpID0+ICh7IHVybDogaS51cmwgfSkpLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgaW1hZ2VzOiB0cnVlLFxuICAgICAgICBjYXRlZ29yeTogdHJ1ZSxcbiAgICAgICAgZmVhdHVyZXM6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGR1cGxpY2F0ZSBhcyBQcm9kdWN0O1xuICB9LFxuXG4gIGdldENhdGVnb3JpZXM6IGFzeW5jICgpOiBQcm9taXNlPENhdGVnb3J5W10+ID0+IHtcbiAgICByZXR1cm4gcHJpc21hLmNhdGVnb3J5LmZpbmRNYW55KHtcbiAgICAgIG9yZGVyQnk6IHsgZGlzcGxheU9yZGVyOiAnYXNjJyB9LFxuICAgIH0pO1xuICB9LFxuXG4gIHNhdmVDYXRlZ29yeTogYXN5bmMgKGNhdGVnb3J5RGF0YTogT21pdDxDYXRlZ29yeSwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCcgfCAncHJvZHVjdHMnPiAmIHsgaWQ/OiBzdHJpbmcgfSk6IFByb21pc2U8Q2F0ZWdvcnk+ID0+IHtcbiAgICBpZiAoY2F0ZWdvcnlEYXRhLmlkKSB7XG4gICAgICByZXR1cm4gcHJpc21hLmNhdGVnb3J5LnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBjYXRlZ29yeURhdGEuaWQgfSxcbiAgICAgICAgZGF0YTogY2F0ZWdvcnlEYXRhLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwcmlzbWEuY2F0ZWdvcnkuY3JlYXRlKHtcbiAgICAgICAgZGF0YTogY2F0ZWdvcnlEYXRhLFxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIGRlbGV0ZUNhdGVnb3J5OiBhc3luYyAoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGF3YWl0IHByaXNtYS5jYXRlZ29yeS5kZWxldGUoeyB3aGVyZTogeyBpZCB9IH0pO1xuICB9LFxuXG4gIGdldEJhbm5lcnM6IGFzeW5jICgpOiBQcm9taXNlPEJhbm5lcltdPiA9PiB7XG4gICAgcmV0dXJuIHByaXNtYS5iYW5uZXIuZmluZE1hbnkoe1xuICAgICAgb3JkZXJCeTogeyBkaXNwbGF5T3JkZXI6ICdhc2MnIH0sXG4gICAgfSk7XG4gIH0sXG5cbiAgZ2V0QmFubmVyQnlJZDogYXN5bmMgKGlkOiBzdHJpbmcpOiBQcm9taXNlPEJhbm5lciB8IG51bGw+ID0+IHtcbiAgICByZXR1cm4gcHJpc21hLmJhbm5lci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgfSk7XG4gIH0sXG5cbiAgY3JlYXRlQmFubmVyOiBhc3luYyAoYmFubmVyOiBPbWl0PEJhbm5lciwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+KTogUHJvbWlzZTxCYW5uZXI+ID0+IHtcbiAgICByZXR1cm4gcHJpc21hLmJhbm5lci5jcmVhdGUoe1xuICAgICAgZGF0YTogYmFubmVyLFxuICAgIH0pO1xuICB9LFxuXG4gIHVwZGF0ZUJhbm5lcjogYXN5bmMgKGlkOiBzdHJpbmcsIGJhbm5lcjogUGFydGlhbDxPbWl0PEJhbm5lciwgJ2lkJyB8ICdjcmVhdGVkQXQnIHwgJ3VwZGF0ZWRBdCc+Pik6IFByb21pc2U8QmFubmVyPiA9PiB7XG4gICAgcmV0dXJuIHByaXNtYS5iYW5uZXIudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBkYXRhOiBiYW5uZXIsXG4gICAgfSk7XG4gIH0sXG5cbiAgZGVsZXRlQmFubmVyOiBhc3luYyAoaWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgIGF3YWl0IHByaXNtYS5iYW5uZXIuZGVsZXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gTGVnYWN5IG1ldGhvZCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICBnZXRCYW5uZXI6IGFzeW5jICgpOiBQcm9taXNlPEJhbm5lcj4gPT4ge1xuICAgIGNvbnN0IGJhbm5lcnMgPSBhd2FpdCBwcmlzbWEuYmFubmVyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IGlzQWN0aXZlOiB0cnVlIH0sXG4gICAgICBvcmRlckJ5OiB7IGRpc3BsYXlPcmRlcjogJ2FzYycgfSxcbiAgICAgIHRha2U6IDEsXG4gICAgfSk7XG5cbiAgICBpZiAoYmFubmVycy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gYmFubmVyc1swXTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgZGVmYXVsdCBiYW5uZXIgaWYgbm9uZSBleGlzdHNcbiAgICByZXR1cm4gcHJpc21hLmJhbm5lci5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB0aXRsZTogJ1dlbGNvbWUgdG8gdGhlIENhdGFsb2cnLFxuICAgICAgICBzdWJ0aXRsZTogJ0V4cGxvcmUgb3VyIHByb2R1Y3RzLicsXG4gICAgICAgIGltYWdlVXJsOiAnaHR0cHM6Ly9waWNzdW0ucGhvdG9zL3NlZWQvYmFubmVyLzEyMDAvNDAwJyxcbiAgICAgICAgbGlua1RleHQ6ICdFeHBsb3JlJyxcbiAgICAgICAgbGlua1VybDogJyNjYXRhbG9nJyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIGRpc3BsYXlPcmRlcjogMCxcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAvLyBMZWdhY3kgbWV0aG9kIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gIHNhdmVCYW5uZXI6IGFzeW5jIChiYW5uZXI6IFBhcnRpYWw8T21pdDxCYW5uZXIsICdpZCcgfCAnY3JlYXRlZEF0JyB8ICd1cGRhdGVkQXQnPj4pOiBQcm9taXNlPEJhbm5lcj4gPT4ge1xuICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgcHJpc21hLmJhbm5lci5maW5kRmlyc3Qoe1xuICAgICAgb3JkZXJCeTogeyBkaXNwbGF5T3JkZXI6ICdhc2MnIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgIHJldHVybiBwcmlzbWEuYmFubmVyLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBleGlzdGluZy5pZCB9LFxuICAgICAgICBkYXRhOiBiYW5uZXIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJpc21hLmJhbm5lci5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICB0aXRsZTogYmFubmVyLnRpdGxlIHx8ICcnLFxuICAgICAgICBzdWJ0aXRsZTogYmFubmVyLnN1YnRpdGxlIHx8ICcnLFxuICAgICAgICBpbWFnZVVybDogYmFubmVyLmltYWdlVXJsIHx8ICcnLFxuICAgICAgICBtb2JpbGVJbWFnZVVybDogYmFubmVyLm1vYmlsZUltYWdlVXJsIHx8IG51bGwsXG4gICAgICAgIGxpbmtUZXh0OiBiYW5uZXIubGlua1RleHQgfHwgJycsXG4gICAgICAgIGxpbmtVcmw6IGJhbm5lci5saW5rVXJsIHx8ICcnLFxuICAgICAgICBpc0FjdGl2ZTogYmFubmVyLmlzQWN0aXZlID8/IHRydWUsXG4gICAgICAgIGRpc3BsYXlPcmRlcjogYmFubmVyLmRpc3BsYXlPcmRlciA/PyAwLFxuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIC8vIFN0b2NrIFN0YXR1cyBNZXRob2RzXG4gIGFzeW5jIGdldFN0b2NrU3RhdHVzZXMoKSB7XG4gICAgLy8gRW5zdXJlIGRlZmF1bHRzIGV4aXN0IGZpcnN0XG4gICAgY29uc3QgY291bnQgPSBhd2FpdCBwcmlzbWEuc3RvY2tTdGF0dXMuY291bnQoKTtcbiAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgIGF3YWl0IHRoaXMuc2VlZFN0b2NrU3RhdHVzZXMoKTtcbiAgICB9XG4gICAgcmV0dXJuIHByaXNtYS5zdG9ja1N0YXR1cy5maW5kTWFueSh7XG4gICAgICBvcmRlckJ5OiB7IGxhYmVsOiAnYXNjJyB9XG4gICAgfSk7XG4gIH0sXG5cbiAgYXN5bmMgY3JlYXRlU3RvY2tTdGF0dXMoZGF0YTogeyBsYWJlbDogc3RyaW5nOyB2YWx1ZTogc3RyaW5nOyBjb2xvcjogc3RyaW5nIH0pIHtcbiAgICByZXR1cm4gcHJpc21hLnN0b2NrU3RhdHVzLmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIGlzRGVmYXVsdDogZmFsc2VcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBhc3luYyB1cGRhdGVTdG9ja1N0YXR1cyhpZDogc3RyaW5nLCBkYXRhOiB7IGxhYmVsPzogc3RyaW5nOyBjb2xvcj86IHN0cmluZyB9KSB7XG4gICAgcmV0dXJuIHByaXNtYS5zdG9ja1N0YXR1cy51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGRhdGFcbiAgICB9KTtcbiAgfSxcblxuICBhc3luYyBkZWxldGVTdG9ja1N0YXR1cyhpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHByaXNtYS5zdG9ja1N0YXR1cy5kZWxldGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfVxuICAgIH0pO1xuICB9LFxuXG4gIGFzeW5jIHNlZWRTdG9ja1N0YXR1c2VzKCkge1xuICAgIGNvbnN0IGRlZmF1bHRzID0gW1xuICAgICAgeyBsYWJlbDogJ0luIFN0b2NrJywgdmFsdWU6ICdJTl9TVE9DSycsIGNvbG9yOiAnZ3JlZW4nIH0sXG4gICAgICB7IGxhYmVsOiAnTG93IFN0b2NrJywgdmFsdWU6ICdMT1dfU1RPQ0snLCBjb2xvcjogJ3llbGxvdycgfSxcbiAgICAgIHsgbGFiZWw6ICdPdXQgb2YgU3RvY2snLCB2YWx1ZTogJ09VVF9PRl9TVE9DSycsIGNvbG9yOiAncmVkJyB9LFxuICAgICAgeyBsYWJlbDogJ0JhY2tvcmRlcicsIHZhbHVlOiAnQkFDS09SREVSJywgY29sb3I6ICdvcmFuZ2UnIH0sXG4gICAgXTtcblxuICAgIGZvciAoY29uc3Qgc3RhdHVzIG9mIGRlZmF1bHRzKSB7XG4gICAgICBhd2FpdCBwcmlzbWEuc3RvY2tTdGF0dXMudXBzZXJ0KHtcbiAgICAgICAgd2hlcmU6IHsgdmFsdWU6IHN0YXR1cy52YWx1ZSB9LFxuICAgICAgICB1cGRhdGU6IHt9LFxuICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICBsYWJlbDogc3RhdHVzLmxhYmVsLFxuICAgICAgICAgIHZhbHVlOiBzdGF0dXMudmFsdWUsXG4gICAgICAgICAgY29sb3I6IHN0YXR1cy5jb2xvcixcbiAgICAgICAgICBpc0RlZmF1bHQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIFN0b3JlIFNldHRpbmdzIE1ldGhvZHNcbiAgYXN5bmMgZ2V0U3RvcmVTZXR0aW5ncygpIHtcbiAgICBsZXQgc2V0dGluZ3MgPSBhd2FpdCBwcmlzbWEuc3RvcmVTZXR0aW5ncy5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiAnZGVmYXVsdCcgfVxuICAgIH0pO1xuXG4gICAgaWYgKCFzZXR0aW5ncykge1xuICAgICAgc2V0dGluZ3MgPSBhd2FpdCBwcmlzbWEuc3RvcmVTZXR0aW5ncy5jcmVhdGUoe1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgaWQ6ICdkZWZhdWx0JyxcbiAgICAgICAgICBzdG9yZU5hbWU6ICdFbGphcmppbmkgQ29tcGxleGUnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gc2V0dGluZ3M7XG4gIH0sXG5cbiAgYXN5bmMgdXBkYXRlU3RvcmVTZXR0aW5ncyhkYXRhOiB7IHN0b3JlTmFtZT86IHN0cmluZzsgbG9nb1VybD86IHN0cmluZzsgZmF2aWNvblVybD86IHN0cmluZyB9KSB7XG4gICAgLy8gRW5zdXJlIGl0IGV4aXN0cyBmaXJzdFxuICAgIGF3YWl0IHRoaXMuZ2V0U3RvcmVTZXR0aW5ncygpO1xuXG4gICAgcmV0dXJuIHByaXNtYS5zdG9yZVNldHRpbmdzLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogJ2RlZmF1bHQnIH0sXG4gICAgICBkYXRhXG4gICAgfSk7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwicHJpc21hIiwicHJvY2VzcyIsImdsb2JhbCIsImxvZyIsIkRCIiwiZ2V0UHJvZHVjdHMiLCJwcm9kdWN0cyIsInByb2R1Y3QiLCJmaW5kTWFueSIsIm9yZGVyQnkiLCJuYW1lIiwiaW5jbHVkZSIsImltYWdlcyIsImNhdGVnb3J5IiwiZmVhdHVyZXMiLCJnZXRQcm9kdWN0QnlJZCIsImlkIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwic2F2ZVByb2R1Y3QiLCJwcm9kdWN0RGF0YSIsImNhdGVnb3J5SWQiLCJkYXRhIiwiZmVhdHVyZURhdGEiLCJtYXAiLCJ0ZXh0IiwiaW1hZ2VEYXRhIiwidXJsIiwidXBkYXRlZFByb2R1Y3QiLCIkdHJhbnNhY3Rpb24iLCJ0eCIsImZlYXR1cmUiLCJkZWxldGVNYW55IiwicHJvZHVjdElkIiwiaW1hZ2UiLCJ1cGRhdGUiLCJjb25uZWN0IiwiY3JlYXRlIiwibmV3UHJvZHVjdCIsImRlbGV0ZVByb2R1Y3QiLCJkZWxldGUiLCJkdXBsaWNhdGVQcm9kdWN0Iiwib3JpZ2luYWwiLCJFcnJvciIsIm5ld1NrdSIsInNrdSIsImNvdW50ZXIiLCJmaW5kRmlyc3QiLCJkdXBsaWNhdGUiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwiaGlkZVByaWNlIiwic3RvY2tTdGF0dXMiLCJmIiwiaSIsImdldENhdGVnb3JpZXMiLCJkaXNwbGF5T3JkZXIiLCJzYXZlQ2F0ZWdvcnkiLCJjYXRlZ29yeURhdGEiLCJkZWxldGVDYXRlZ29yeSIsImdldEJhbm5lcnMiLCJiYW5uZXIiLCJnZXRCYW5uZXJCeUlkIiwiY3JlYXRlQmFubmVyIiwidXBkYXRlQmFubmVyIiwiZGVsZXRlQmFubmVyIiwiZ2V0QmFubmVyIiwiYmFubmVycyIsImlzQWN0aXZlIiwidGFrZSIsImxlbmd0aCIsInRpdGxlIiwic3VidGl0bGUiLCJpbWFnZVVybCIsImxpbmtUZXh0IiwibGlua1VybCIsInNhdmVCYW5uZXIiLCJleGlzdGluZyIsIm1vYmlsZUltYWdlVXJsIiwiZ2V0U3RvY2tTdGF0dXNlcyIsImNvdW50Iiwic2VlZFN0b2NrU3RhdHVzZXMiLCJsYWJlbCIsImNyZWF0ZVN0b2NrU3RhdHVzIiwiaXNEZWZhdWx0IiwidXBkYXRlU3RvY2tTdGF0dXMiLCJkZWxldGVTdG9ja1N0YXR1cyIsImRlZmF1bHRzIiwidmFsdWUiLCJjb2xvciIsInN0YXR1cyIsInVwc2VydCIsImdldFN0b3JlU2V0dGluZ3MiLCJzZXR0aW5ncyIsInN0b3JlU2V0dGluZ3MiLCJzdG9yZU5hbWUiLCJ1cGRhdGVTdG9yZVNldHRpbmdzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./services/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsettings&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csettings%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();